(function(t){function e(e){for(var a,i,r=e[0],c=e[1],l=e[2],u=0,h=[];u<r.length;u++)i=r[u],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&h.push(n[i][0]),n[i]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);m&&m(e);while(h.length)h.shift()();return o.push.apply(o,l||[]),s()}function s(){for(var t,e=0;e<o.length;e++){for(var s=o[e],a=!0,i=1;i<s.length;i++){var r=s[i];0!==n[r]&&(a=!1)}a&&(o.splice(e--,1),t=c(c.s=s[0]))}return t}var a={},i={app:0},n={app:0},o=[];function r(t){return c.p+"js/"+({about:"about"}[t]||t)+"."+{about:"88fdaed4"}[t]+".js"}function c(e){if(a[e])return a[e].exports;var s=a[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,c),s.l=!0,s.exports}c.e=function(t){var e=[],s={about:1};i[t]?e.push(i[t]):0!==i[t]&&s[t]&&e.push(i[t]=new Promise((function(e,s){for(var a="css/"+({about:"about"}[t]||t)+"."+{about:"2d6a7aa2"}[t]+".css",n=c.p+a,o=document.getElementsByTagName("link"),r=0;r<o.length;r++){var l=o[r],u=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(u===a||u===n))return e()}var h=document.getElementsByTagName("style");for(r=0;r<h.length;r++){l=h[r],u=l.getAttribute("data-href");if(u===a||u===n)return e()}var m=document.createElement("link");m.rel="stylesheet",m.type="text/css",m.onload=e,m.onerror=function(e){var a=e&&e.target&&e.target.src||n,o=new Error("Loading CSS chunk "+t+" failed.\n("+a+")");o.code="CSS_CHUNK_LOAD_FAILED",o.request=a,delete i[t],m.parentNode.removeChild(m),s(o)},m.href=n;var d=document.getElementsByTagName("head")[0];d.appendChild(m)})).then((function(){i[t]=0})));var a=n[t];if(0!==a)if(a)e.push(a[2]);else{var o=new Promise((function(e,s){a=n[t]=[e,s]}));e.push(a[2]=o);var l,u=document.createElement("script");u.charset="utf-8",u.timeout=120,c.nc&&u.setAttribute("nonce",c.nc),u.src=r(t);var h=new Error;l=function(e){u.onerror=u.onload=null,clearTimeout(m);var s=n[t];if(0!==s){if(s){var a=e&&("load"===e.type?"missing":e.type),i=e&&e.target&&e.target.src;h.message="Loading chunk "+t+" failed.\n("+a+": "+i+")",h.name="ChunkLoadError",h.type=a,h.request=i,s[1](h)}n[t]=void 0}};var m=setTimeout((function(){l({type:"timeout",target:u})}),12e4);u.onerror=u.onload=l,document.head.appendChild(u)}return Promise.all(e)},c.m=t,c.c=a,c.d=function(t,e,s){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(c.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)c.d(s,a,function(e){return t[e]}.bind(null,a));return s},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="",c.oe=function(t){throw console.error(t),t};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],u=l.push.bind(l);l.push=e,l=l.slice();for(var h=0;h<l.length;h++)e(l[h]);var m=u;o.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"08c5":function(t,e,s){"use strict";var a=s("12d2"),i=s.n(a);i.a},"0abc":function(t,e,s){},"0f7c":function(t,e,s){"use strict";var a=s("7266"),i=s.n(a);i.a},"117a":function(t,e,s){"use strict";var a=s("4af0"),i=s.n(a);i.a},"12d2":function(t,e,s){},1487:function(t,e,s){"use strict";var a=s("c272"),i=s.n(a);i.a},"14c1":function(t,e,s){"use strict";var a=s("86b8"),i=s.n(a);i.a},"1e64":function(t,e,s){"use strict";var a=s("a673"),i=s.n(a);i.a},"299c":function(t,e,s){"use strict";var a=s("fe1b"),i=s.n(a);i.a},"2ae3":function(t,e,s){},3013:function(t,e,s){},3846:function(t,e,s){},4725:function(t,e,s){},"4af0":function(t,e,s){},5306:function(t,e,s){},"53f0":function(t,e,s){"use strict";var a=s("92d7"),i=s.n(a);i.a},"56d7":function(t,e,s){"use strict";s.r(e);s("cadf"),s("551c"),s("f751"),s("097d");var a=s("2b0e"),i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[t.ifheader?s("Header"):t._e(),s("div",{class:{content:t.ifheader}},[t.ifheader?s("navBar",{key:t.showpart,attrs:{showPart:t.showpart,showIndex:t.showIndex}}):t._e(),s("div",{key:t.$route.path,ref:"main",attrs:{id:"main"}},[s("router-view")],1)],1)],1)},n=[],o=(s("7f7f"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"Head"},[t._m(0),s("div",{staticClass:"exit"},[s("i",{staticClass:"el-icon-switch-button",on:{click:function(e){return t.iflogout()}}}),t.newnum>0?s("el-badge",{staticClass:"item",staticStyle:{cursor:"pointer"},attrs:{value:t.newnum,max:99},nativeOn:{click:function(e){return t.onNews()}}},[s("i",{staticClass:"el-icon-message"})]):s("i",{staticClass:"el-icon-message"})],1)])}),r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"log"},[a("img",{attrs:{src:s("b4d0")}}),a("img",{attrs:{src:s("977b")}})])}],c={name:"Head",data:function(){return{param:new FormData,newnum:0}},mounted:function(){if(this.getToken()){var t=this;setInterval((function(){t.getnnews()}),9e4)}},methods:{iflogout:function(){var t=this;this.$confirm("确认退出登录？").then((function(){t.LogOut()})).catch((function(){}))},getnnews:function(){var t=this,e=new FormData;e.set("token",this.getToken()),this.axios.post(this.$baseUrl+"/unreadNum",e).then((function(e){200==e.data.code&&(t.newnum=e.data.data.numbers,console.log(t.newnum))}))},LogOut:function(){var t=this,e=this.$baseUrl+"/logout";this.param.set("token",this.getToken()),this.axios.post(e,this.param).then((function(e){console.log(e.data),200==e.data.code&&(sessionStorage.removeItem("token"),t.$message.success("退出登录！"),t.$router.push("/"))})).catch((function(t){console.log(t)}))},getToken:function(){var t=sessionStorage.getItem("token");return t.slice(1,t.length-1)},onNews:function(){this.$router.push("/Mymsg"),this.newnum=0}}},l=c,u=(s("b488"),s("2877")),h=Object(u["a"])(l,o,r,!1,null,"73ca0fdc",null),m=h.exports,d=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"navBar"},[s("div",{staticClass:"userInfo"},[s("img",{attrs:{src:t.$store.state.cover?t.imgUrl+t.$store.state.cover:""}}),s("div",{staticClass:"username"},[t._v("\n  \t\t"+t._s(this.$store.state.name)+"\n  \t")])]),s("ul",{staticClass:"Bar"},t._l(t.showTab,(function(e,a){return s("li",{key:a,class:[t.showIndex==a?"isActive":""],on:{click:function(e){return t.getIndex(a)}}},[s("i",{class:e.icon}),s("p",[t._v(t._s(e.name))])])})),0),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showBack,expression:"showBack"}],staticClass:"comeBack",on:{click:t.goCouse}},[t._v("返回课程列表")])])},p=[],g={name:"navBar",props:["showPart","showIndex"],data:function(){return{selfmenu:"menu",showBack:!1,navBarFixed:!1,nCourse:"",imgUrl:"",showTab:[],homeTab:[{path:"/News/news",icon:"el-icon-edit",name:"新闻管理"},{path:"/course",icon:"el-icon-edit",name:"课程管理"},{path:"/StuManage",icon:"el-icon-edit",name:"学生管理"},{path:"/ClassChat",icon:"el-icon-edit",name:"班级管理"},{path:"/Mymsg",icon:"el-icon-edit",name:"我的消息"},{path:"/SelfInfo",icon:"el-icon-edit",name:"个人中心"}],Tab:[{path:"/News/inform",icon:"el-icon-discover",name:"通知发布"},{path:"/CourseUpload",icon:"el-icon-s-platform",name:"课程管理"},{path:"/Communicate/msg",icon:"el-icon-chat-line-round",name:"交流模块"},{path:"/StuProgress",icon:"el-icon-user-solid",name:"学生进度"},{path:"/Exam/test",icon:"el-icon-edit",name:"考试管理"}]}},mounted:function(){this.securityConfirm()},methods:{handleOpen:function(t,e){console.log(t,e)},handleClose:function(t,e){console.log(t,e)},getIndex:function(t){this.ifactive=t,"homeTab"==this.showPart?this.$router.push(this.homeTab[t].path):this.$router.push(this.Tab[t].path),sessionStorage.setItem("nowPage",JSON.stringify(1))},securityConfirm:function(){var t=sessionStorage.getItem("token");if(null==t)return this.$message.warning("请先登录!"),void this.$router.push("/");this.imgUrl=this.$ImgUrl+"/avatar/",this.getTab()},getTab:function(){var t=this.showPart;if("homeTab"==t&&(this.showTab=this.homeTab,this.showBack=!1),"Tab"==t){this.showTab=this.Tab;var e=sessionStorage.getItem("courseName");e&&(this.nCourse=e.slice(1,e.length-1)),this.showBack=!0}},goCouse:function(){this.$router.push("/course")}}},f=g,v=(s("08c5"),Object(u["a"])(f,d,p,!1,null,"0792ca1c",null)),b=v.exports,w={name:"app",components:{Header:m,navBar:b},data:function(){return{ifheader:!1,showpart:"homeTab",showIndex:"",sureIndex:""}},mounted:function(){this.judgeWidth(),window.addEventListener("unload",this.saveState)},watch:{$route:function(t,e){this.judgeWidth()}},methods:{judgeWidth:function(){"/"==this.$route.path?this.ifheader=!1:this.ifheader=!0,this.getNavParam()},getNavParam:function(){var t=this.$route.path,e=this.$route.query,s=this.$route.params;return"/News/news"==t||"/News/Renews"==t||"news"==e.name&&"/Show"==t||"Renews"==e.name&&"/Publish"==t||"news"==e.name&&"/Publish"==t?(this.showpart="homeTab",void(this.showIndex=0)):"/course"==t||"/CourseAdd"==t?(this.showpart="homeTab",void(this.showIndex=1)):"/StuManage"==t?(this.showpart="homeTab",void(this.showIndex=2)):"/ClassChat"==t||"msg"!=s.name&&0==t.indexOf("/Communicate/")||"msg"!=s.name&&0==t.indexOf("/Comment")?(this.showpart="homeTab",void(this.showIndex=3)):"/Mymsg"==t?(this.showpart="homeTab",void(this.showIndex=4)):"/SelfInfo"==t?(this.showpart="homeTab",void(this.showIndex=5)):"/CourseUpload"==t||"/CourseWare"==t?(this.showpart="Tab",void(this.showIndex=1)):"/Communicate/msg"==t||"msg"==e.name&&0==t.indexOf("/Comment")?(this.showpart="Tab",void(this.showIndex=2)):0==t.indexOf("/StuProgress")?(this.showpart="Tab",void(this.showIndex=3)):0==t.indexOf("/Exam/")||"/Homework"==t||"test"==e.name&&"/Publish"==t||"test"==e.name&&"/Show"==t?(this.showpart="Tab",void(this.showIndex=4)):(this.showpart="Tab",void(this.showIndex=0))},getToken:function(){var t=sessionStorage.getItem("token");return t.slice(1,t.length-1)},saveState:function(){sessionStorage.setItem("state",JSON.stringify(this.$store.state))}}},C=w,k=(s("9445"),Object(u["a"])(C,i,n,!1,null,"e42caca4",null)),_=k.exports,y=s("8c4f"),I=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"Login"},[t._m(0),s("div",{staticClass:"main"},[s("p",[t._v("登录")]),s("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm,"status-icon":"",rules:t.rules,"label-width":"60px","label-position":"left"}},[s("el-form-item",{attrs:{label:"账号",prop:"mname"}},[s("el-input",{attrs:{type:"mname",autocomplete:"off",placeholder:"请输入账户名"},model:{value:t.ruleForm.mname,callback:function(e){t.$set(t.ruleForm,"mname",e)},expression:"ruleForm.mname"}})],1),s("el-form-item",{attrs:{label:"密码",prop:"password"}},[s("el-input",{attrs:{type:"password",autocomplete:"off",placeholder:"请输入密码"},model:{value:t.ruleForm.password,callback:function(e){t.$set(t.ruleForm,"password",e)},expression:"ruleForm.password"}})],1),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm("ruleForm")}}},[t._v("提交")]),s("el-button",{on:{click:function(e){return t.resetForm("ruleForm")}}},[t._v("重置")])],1)],1)],1)])},$=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"log"},[a("img",{attrs:{src:s("b4d0")}}),a("img",{attrs:{src:s("977b")}})])}],P=s("bc3a"),x=s.n(P),T={name:"Login",data:function(){var t=function(t,e,s){""===e?s(new Error("账户名不能为空")):s()},e=function(t,e,s){""===e?s(new Error("密码不能为空")):s()};return{ruleForm:{mname:"",password:""},rules:{mname:[{validator:t,trigger:"blur"}],password:[{validator:e,trigger:"blur"}]}}},methods:{submitForm:function(t){var e=this;this.$refs[t].validate((function(t){if(!t)return e.$message.error("账号名或密码错误！"),!1;e.getPermit()}))},resetForm:function(t){this.$refs[t].resetFields()},getPermit:function(){var t=this,e=new FormData;e.set("username",this.ruleForm.mname),e.set("isTeacher",1),e.set("password",this.ruleForm.password),this.$axios.post(this.$baseUrl+"/login",e).then((function(e){console.log(e.data),200==e.data.code?t.saveUserInfo(e.data.data.token):t.$message.error(e.data.message)})).catch((function(t){console.log(t)}))},saveUserInfo:function(t){var e={name:this.ruleForm.mname,psd:this.ruleForm.password};sessionStorage.setItem("token",JSON.stringify(t)),sessionStorage.setItem("userInfo",JSON.stringify(e)),this.$message.success("登录成功！"),this.$router.push("/News/news")}}},D=T,S=(s("1e64"),Object(u["a"])(D,I,$,!1,null,"8c2e2900",null)),F=S.exports,U=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"publish"},[s("div",{staticClass:"pubHead"},[s("i",{staticClass:"el-icon-back",on:{click:function(e){return t.goBack()}}}),s("p",[t._v(t._s(t.pubName))]),s("div",{staticClass:"annouce"},[s("div",{staticClass:"selectStu",on:{click:function(e){return t.publishing()}}},[t._v(t._s(t.pubBtn))])])]),s("hr"),s("div",{staticClass:"editor"},[s("div",{staticClass:"title"},[s("p",{staticClass:"intro"},[t._v("标题")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],attrs:{type:"text",name:"search",placeholder:"请输入标题",autocomplete:"off"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}}),"test"==t.name||"homework"==t.name||"Retest"==t.name||"Rehomework"==t.name?s("div",{staticClass:"TBtn"},[s("span",{on:{click:function(e){t.dialogVisible=!0}}},[t._v("设置起止时间")]),s("span",[t._v(t._s(t.startTime))]),t._v("-"),s("span",[t._v(t._s(t.endTime))])]):t._e()]),s("div",{staticClass:"contain"},[s("p",{staticClass:"intro"},[t._v("内容")]),s("div",{staticClass:"rest"},[s("Edit",{key:t.old.infoID,attrs:{Tcontent:t.content},on:{newsEvent:t.showInfo}})],1)])]),s("el-dialog",{attrs:{title:"设置起止时间",visible:t.dialogVisible,width:"50%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[s("div",{staticClass:"block"},[s("el-date-picker",{attrs:{type:"datetimerange",align:"right","start-placeholder":"开始日期","end-placeholder":"结束日期","default-time":["12:00:00","08:00:00"]},model:{value:t.deadline,callback:function(e){t.deadline=e},expression:"deadline"}})],1),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:t.getDeadline}},[t._v("确 定")])],1)])],1)},L=[],N=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"edit_container"},[s("quill-editor",{ref:"myQuillEditor",attrs:{options:t.editorOption},on:{blur:function(e){return t.onEditorBlur(e)},focus:function(e){return t.onEditorFocus(e)},change:function(e){return t.onEditorChange(e)}},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1)},E=[],A={name:"edit_container",props:["Tcontent"],data:function(){return{content:"",editorOption:{modules:{toolbar:[["bold","italic"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{color:[]},{background:[]}],[{align:[]}],["image"]]}}}},computed:{editor:function(){return this.$refs.myQuillEditor.quill}},mounted:function(){this.content=this.Tcontent},methods:{onEditorReady:function(t){},onEditorBlur:function(){console.log("lose focus!"),console.log(this.content),this.$emit("newsEvent",this.content)},onEditorFocus:function(){},onEditorChange:function(){}}},O=A,B=(s("53f0"),Object(u["a"])(O,N,E,!1,null,null,null)),j=B.exports,V={name:"publish",components:{Edit:j},data:function(){return{param:new FormData,courseID:"",deadline:"",pubName:"",pubBtn:"",title:"",content:"",name:"",startTime:"未选择",endTime:"未选择",dialogVisible:!1,url:"",old:{title:"",content:"",publisher:"",infoID:"",startTime:"",endTime:""}}},mounted:function(){if(this.getToken()){var t=this.$route.query.name.indexOf("Re");0==t?this.correctInfo():this.pubGetName()}},methods:{pubGetName:function(){var t=this.$route.query;switch(this.name=t.name,this.pubBtn="发布",this.courseID=sessionStorage.getItem("courseID"),this.param.set("token",this.getToken()),this.name){case"news":this.pubName="发布新闻",this.url=this.$baseUrl+"/aNews";break;case"inform":this.pubName="发布通知",this.param.set("courseId",this.courseID),this.url=this.$baseUrl+"/pNotice";break;case"test":this.pubName="发布作业",this.param.set("courseId",this.courseID),this.url=this.$baseUrl+"/homework/pub";break;case"homework":this.pubName="发布考试",this.param.set("courseId",this.courseID),this.url=this.$baseUrl+"/homework/pub";break;default:break}},correctInfo:function(){var t=this,e=this.$route.query,s=new FormData;s.set("id",e.id),s.set("token",this.getToken()),this.name=e.name,console.log(e.name);var a="";switch(this.pubBtn="确定",this.name){case"Renews":this.pubName="修改新闻",this.url=this.$baseUrl+"/uNews",a=this.$baseUrl+"/news/"+e.id;break;case"Retest":this.pubName="修改作业",this.url=this.$baseUrl+"/homework/update",a=this.$baseUrl+"/homework/"+e.id;break;case"Rehomework":this.pubName="修改考试",this.url=this.$baseUrl+"/homework/update",a=this.$baseUrl+"/homework/"+e.id;break;default:break}this.axios.post(a,s).then((function(e){var s=t;if(200==e.data.code){var a=e.data.data;s.old.title=a.title,s.old.content=a.content,s.old.publisher=a.publisherId,s.old.infoID=a.id,"Retest"!=t.name&&"Rehomework"!=t.name||(s.old.startTime=a.startTime,s.old.endTime=a.endTime,s.startTime=a.startTime,s.endTime=a.endTime),s.title=a.title,s.content=a.content}else t.$message.error("获取内容失败！")}))},publishing:function(){if(""!=this.title)if(""!=this.content){if(console.log(this.name),"test"==this.name||"homework"==this.name){if("未选择"==this.startTime)return void this.$message.error("请设置起止时间！");this.param.set("startTime",this.startTime),this.param.set("endTime",this.endTime),this.param.set("category",this.name)}"确定"==this.pubBtn?this.title==this.old.title&&this.content==this.old.content?this.$message.error("请确定有修改内容！"):this.corNews():this.pubNews()}else this.$message.error("发布内容不能为空！");else this.$message.error("发布标题不能为空！")},pubNews:function(){var t=this;this.param.set("content",this.content),this.param.set("title",this.title),this.axios.post(this.url,this.param).then((function(e){var s=e.data;200==s.code?(t.$message.success("发布成功！"),t.goBack()):t.$message.error("发布失败！")})).catch((function(e){t.$message.error(e)}))},corNews:function(){var t=this;this.param.set("content",this.content),this.param.set("title",this.title),this.param.set("token",this.getToken()),this.param.set("publisherId",this.old.publisher),this.param.set("id",this.old.infoID),this.axios.post(this.url,this.param).then((function(e){var s=e.data;200==s.code?(t.$message.success("修改成功！"),t.goBack()):t.$message.error("修改失败！")})).catch((function(e){t.$message.error(e)}))},getOldInfo:function(){var t=this;this.axios.post(this.$baseUrl+"/pNotice",{content:this.content,title:this.title}).then((function(e){var s=e.data;200==s.code?t.$message.success("发布成功！"):t.$message.error("发布失败！")})).catch((function(e){t.$message.error(e)}))},getDeadline:function(){console.log(this.deadline),this.startTime=this.DateTranse(this.deadline[0]),this.endTime=this.DateTranse(this.deadline[1]),this.dialogVisible=!1},DateTranse:function(t){var e=new Date(t),s=e.getHours()<10?"0"+e.getHours():e.getHours(),a=e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes(),i=e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds(),n=e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+" "+s+":"+a+":"+i;return n},goBack:function(){this.$router.go(-1)},showInfo:function(t){this.content=t},getToken:function(){var t=sessionStorage.getItem("token");return t.slice(1,t.length-1)}}},W=V,M=(s("9fb1"),Object(u["a"])(W,U,L,!1,null,null,null)),q=M.exports,H=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"showInform"},[s("div",{staticClass:"showHead"},[s("i",{staticClass:"el-icon-back",on:{click:function(e){return t.goBack()}}}),s("p",[t._v(t._s(t.title)+"详情页")]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.ifUP,expression:"ifUP"}],staticClass:"annouce"},[s("div",{staticClass:"selectStu",on:{click:function(e){return t.goCorrect()}}},[t._v("修改")])])]),s("hr"),s("div",{staticClass:"content"},[s("div",{staticClass:"newsTitle"},[t._v(t._s(t.showData.newsTitle))]),s("div",{staticClass:"author"},[s("p",[t._v("发布人:"+t._s(t.showData.publisher))]),s("p",[t._v("发布时间："+t._s(t.showData.publishTime))])]),s("div",{staticClass:"newscontent",domProps:{innerHTML:t._s(t.showData.newsContent)}})])])},G=[],R=(s("a481"),{name:"showInform",mounted:function(){if(this.getToken()){var t=this.$route.query;console.log(t.name,t.id),this.getContent(t.name,t.id)}},methods:{addStyle:function(t){var e="";console.log(t),e=t.replace(/<p><img/g,'<p ><img style="width: 100%;margin: 1.4987013vw 0;"'),e=e.replace(/<p class/g,'<p style="text-indent: 2em;margin: 0;font-size: 1.3vw;line-height: 2vw;" class'),e=e.replace(/<p>/g,'<p style="text-indent: 2em;margin: 0;font-size: 1.3vw;line-height: 2vw;">'),this.showData.newsContent=e},getToken:function(){var t=sessionStorage.getItem("token");return t=t.slice(1,t.length-1),t},getContent:function(t,e){switch(t){case"news":this.title="新闻",this.ifUP=!0,this.getUrl=this.$baseUrl+"/news/"+e;break;case"inform":this.title="通知",this.getUrl=this.$baseUrl+"/notice/"+e;break;case"test":this.ifUP=!0,this.title="作业",this.getUrl=this.$baseUrl+"/homework/"+e;break;case"homework":this.ifUP=!0,this.title="考试",this.getUrl=this.$baseUrl+"/homework/"+e;break;default:break}this.name=t,this.param.set("id",e),this.param.set("token",this.getToken()),this.getDetail(this.getUrl)},getDetail:function(t){var e=this;this.axios.post(t,this.param).then((function(t){console.log(t.data),200==t.data.code?(e.showData.newsTitle=t.data.data.title,e.showData.publisher=t.data.data.publisherId,e.showData.publishTime=t.data.data.time,e.showData.ID=t.data.data.id,e.addStyle(t.data.data.content)):e.$message.error("获取内容失败！")}))},goBack:function(){console.log("go back"),this.$router.go(-1)},goCorrect:function(){this.$router.push({path:"/Publish",query:{name:"Re"+this.name,id:this.showData.ID}})}},data:function(){return{param:new FormData,title:"",getUrl:"",name:"",ifUP:!1,showData:{ID:"",newsTitle:"",newsContent:"",publisher:"",publishTime:""}}}}),z=R,J=(s("65ab"),Object(u["a"])(z,H,G,!1,null,"20b7813b",null)),Z=J.exports,Q=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"course"},[s("ul",{staticClass:"newsHead"},[s("li",[t._v("已有课程")]),s("li",{on:{click:t.addCourse}},[t._v("创建课程")])]),s("ul",{staticClass:"showCourse"},t._l(t.courseList,(function(e,a){return s("li",{key:e.id,staticClass:"courseList"},[s("img",{attrs:{src:t.imgUrl+e.cover,alt:"123"},on:{click:function(s){return t.goCourse(e.id,e.name)}}}),s("ul",{staticClass:"info"},[s("li",{on:{click:function(s){return t.goCourse(e.id,e.name)}}},[t._v(t._s(e.name))]),s("li",[s("p",[t._v("讲师："+t._s(e.teacher))]),s("div",{staticClass:"change"},[s("i",{staticClass:"el-icon-edit-outline",on:{click:function(e){return t.UpCourse(a)}}}),s("i",{staticClass:"el-icon-delete",on:{click:function(s){return t.ifDelCourse(e.id)}}})])])])])})),0)])},K=[],Y=(s("ac4d"),s("8a81"),s("ac6a"),{name:"course",data:function(){return{imgUrl:"",param:new FormData,courseList:[]}},mounted:function(){this.getToken()&&(this.getCourseList(),this.imgUrl=this.$ImgUrl+"/course/")},methods:{getCourseList:function(){var t=this;this.param.set("currentPage",1),this.param.set("pageNum",9),this.param.set("token",this.getToken()),this.axios.post(this.$baseUrl+"/courses",this.param).then((function(e){console.log(e.data);var s={};t.courseList=[];var a=function(t){return s={id:t.id,teacher:t.teaName,name:t.title,cover:t.url,desc:t.description,code:t.code},s};if(200==e.data.code){var i=e.data.data.pageData;if(Array.isArray(i)){var n=!0,o=!1,r=void 0;try{for(var c,l=i[Symbol.iterator]();!(n=(c=l.next()).done);n=!0){var u=c.value;t.courseList.push(a(u))}}catch(h){o=!0,r=h}finally{try{n||null==l.return||l.return()}finally{if(o)throw r}}}else t.$message.warning("课程列表为空！")}else t.$message.error("获取课程列表失败！")})).catch((function(e){t.$message.error(e)}))},getToken:function(){var t=sessionStorage.getItem("token");return t.slice(1,t.length-1)},goCourse:function(t,e){sessionStorage.setItem("courseID",JSON.stringify(t)),sessionStorage.setItem("courseName",JSON.stringify(e)),this.$router.push("/News/inform")},addCourse:function(){this.$router.push("/CourseAdd")},UpCourse:function(t){this.$router.push({path:"/CourseAdd",query:{id:this.courseList[t].id,name:this.courseList[t].name,desc:this.courseList[t].desc,cover:this.courseList[t].cover,code:this.courseList[t].code}})},ifDelCourse:function(t){var e=this;this.$confirm("确认删除该条信息？").then((function(){e.deleteList(t)})).catch((function(){}))},deleteList:function(t){var e=this,s=this,a=new FormData,i=this.$baseUrl+"/course/delete/"+t;a.set("token",this.getToken()),this.axios.post(i,a).then((function(t){200==t.data.code?(e.getCourseList(e.getDataUrl),s.$message.success("删除成功！")):s.$message.error("删除失败！")}))}}}),X=Y,tt=(s("117a"),Object(u["a"])(X,Q,K,!1,null,"d76986ea",null)),et=tt.exports,st=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"StuAcount"},[s("div",{staticClass:"stuHead"},[s("ul",[s("li",[t._v(t._s(t.stuTitle)+" ")])]),s("div",{staticClass:"search"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.searches,expression:"searches"}],attrs:{type:"text",name:"search",placeholder:"请输入学号/姓名/班级",autocomplete:"off"},domProps:{value:t.searches},on:{input:function(e){e.target.composing||(t.searches=e.target.value)}}}),s("i",{staticClass:"el-icon-search",on:{click:function(e){return t.Searching()}}})]),s("ul",{staticClass:"createAcount"},[s("li",[s("el-upload",{staticClass:"upload-demo",attrs:{action:t.$baseUrl+"/batchImport","auto-upload":"",accept:"*.xls","show-file-list":!1,"on-success":t.handleSuc,"on-error":t.handleErr,data:t.excle}},[s("div",{staticStyle:{color:"#fff"}},[t._v("批量导入")])])],1),s("li",{on:{click:function(e){return t.appAcount()}}},[t._v("创建学生账号")])])]),s("ul",{staticClass:"stuAcnt"},[s("li",[s("el-row",[s("el-col",{attrs:{span:5}},[t._v("学号")]),s("el-col",{attrs:{span:5}},[t._v("姓名")]),s("el-col",{attrs:{span:5}},[t._v("性别")]),s("el-col",{attrs:{span:5}},[t._v("电话")]),s("el-col",{attrs:{span:4}},[t._v("操作")])],1)],1),t._l(t.acntList,(function(e,a){return s("li",{key:a},[s("el-row",[s("el-col",{attrs:{span:5}},[t._v(t._s(e.stuNum))]),s("el-col",{attrs:{span:5}},[t._v(t._s(e.name))]),s("el-col",{attrs:{span:5}},[t._v(t._s(e.sex))]),s("el-col",{attrs:{span:5}},[t._v(t._s(e.phone))]),s("i",{staticClass:"el-icon-edit-outline",on:{click:function(e){return t.upAcount(a)}}}),s("i",{staticClass:"el-icon-delete",on:{click:function(s){return t.DelAcount(e.id)}}})],1)],1)}))],2),s("div",{staticClass:"paging"},[t.ispage?s("el-pagination",{attrs:{"current-page":t.activePage,"page-size":10,"pager-count":5,layout:"prev, pager, next",total:t.totalNum},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.activePage=e},"update:current-page":function(e){t.activePage=e}}}):t._e()],1),s("el-dialog",{attrs:{title:t.dialogTitle,width:"40%",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[s("el-input",{attrs:{autocomplete:"off",placeholder:"请输入学号",oninput:"value=value.replace(/[^\\d]/g,'')"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}}),t.isUpPsd?s("el-input",{staticStyle:{"margin-top":"10px"},attrs:{autocomplete:"off",placeholder:"请输入修改密码"},model:{value:t.form.psd,callback:function(e){t.$set(t.form,"psd",e)},expression:"form.psd"}}):t._e(),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.simpleAcount()}}},[t._v("确 定")])],1)],1)],1)},at=[],it={name:"StuAcount",data:function(){return{stuTitle:"学生账号管理",searching:"",activePage:1,totalNum:50,ispage:!1,acntList:[],param:new FormData,excle:{token:""},dialogTitle:"",dialogFormVisible:!1,isUpPsd:!1,form:{name:"",psd:"",id:""},searches:"",formLabelWidth:"120px"}},mounted:function(){this.getToken()&&this.addParamValue()},methods:{handleCurrentChange:function(t){console.log("当前页: ".concat(t)),this.param.set("currentPage",this.activePage),this.getAcount(),sessionStorage.setItem("nowPage",JSON.stringify(this.activePage))},addParamValue:function(){var t=sessionStorage.getItem("nowPage");console.log(t),this.activePage=t?parseInt(t):this.activePage,this.param.set("token",this.getToken()),this.excle.token=this.getToken(),this.param.set("currentPage",this.activePage),this.param.set("pageNum",10),this.getAcount()},getAcount:function(t){var e=this,s=t||this.param;this.axios.post(this.$baseUrl+"/students",s).then((function(t){console.log(t.data);var s={};e.acntList=[];var a=function(t){return s={id:t.id,stuNum:t.username,name:t.name?t.name:"未设置",phone:t.phone?t.phone:"未设置",sex:t.sexual?t.sexual:"未设置"},s};if(200==t.data.code){if(t=t.data.data,e.totalNum=t.totalNumber,Array.isArray(t.pageData)){var i=!0,n=!1,o=void 0;try{for(var r,c=t.pageData[Symbol.iterator]();!(i=(r=c.next()).done);i=!0){var l=r.value;e.acntList.push(a(l))}}catch(u){n=!0,o=u}finally{try{i||null==c.return||c.return()}finally{if(n)throw o}}}else e.$message.warning(e.name+"列表为空！");e.ispage=!0}else e.$message.error("获取"+e.name+"列表失败！")})).catch((function(t){console.log(t)}))},upAcount:function(t){this.dialogFormVisible=!0,this.dialogTitle="修改学生账号",this.isUpPsd=!0,this.form.name=this.acntList[t].stuNum,this.form.id=this.acntList[t].id},appAcount:function(){this.dialogFormVisible=!0,this.isUpPsd=!1,this.dialogTitle="创建学生账号"},simpleAcount:function(){var t=this,e=this;if(""!=this.form.name){var s=new FormData;s.set("token",this.getToken()),"创建学生账号"==this.dialogTitle?(s.set("username",this.form.name),this.axios.post(this.$baseUrl+"/student/add",s).then((function(s){console.log(s.data),200==s.data.code?(e.$message.success("账号创建成功！"),e.getAcount()):e.$message.error(s.data.message),t.dialogFormVisible=!1,t.form.name=""})).catch((function(t){console.log(t)}))):(s.set("username",this.form.name),s.set("password",this.form.psd),s.set("id",this.form.id),this.axios.post(this.$baseUrl+"/student/update",s).then((function(s){console.log(s.data),200==s.data.code&&(e.$message.success("账号修改成功！"),t.dialogFormVisible=!1,t.form.name="",t.form.psd="",e.getAcount())})).catch((function(t){console.log(t)})))}else this.$message.error("创建学号不能为空！")},DelAcount:function(t){var e=this;this.$confirm("确认删除该条信息？").then((function(){e.DoDel(t)})).catch((function(){}))},DoDel:function(t){var e=this,s=this.$baseUrl+"/student/delete",a=new FormData;a.set("id",t),a.set("token",this.getToken()),this.axios.post(s,a).then((function(t){console.log(t),200==t.data.code&&e.getAcount()})).catch((function(){}))},Searching:function(){var t=new FormData;t.set("token",this.param.get("token")),t.set("currentPage",this.param.get("currentPage")),t.set("pageNum",this.param.get("pageNum")),""!=this.searches?("2"==this.searches[0]?t.set("stuNum",this.searches):"0"==this.searches[0]?t.set("classNum",this.searches):t.set("stuName",this.searches),console.log(t.get("pageNum")),this.getAcount(t)):this.$message.error("请输入查找信息！")},handleSuc:function(t,e,s){console.log(t),200==t.code&&this.$message.success(t.message)},handleErr:function(t,e,s){0==s.length&&console.log("上传失败！"),console.log(s)},getToken:function(){var t=sessionStorage.getItem("token");return t.slice(1,t.length-1)}}},nt=it,ot=(s("1487"),Object(u["a"])(nt,st,at,!1,null,"40f5979c",null)),rt=ot.exports,ct=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"course"},[s("ul",{staticClass:"newsHead"},[s("li",[t._v("班级列表")]),s("li",{on:{click:function(e){return t.addClass()}}},[t._v("添加列表")])]),s("ul",{staticClass:"showCourse"},t._l(t.DataList,(function(e,a){return s("li",{key:a},[s("div",{staticClass:"name",on:{click:function(s){return t.goCommunity(e.id)}}},[t._v(t._s(e.name))]),s("div",{staticClass:"desc"},[s("p",[t._v(t._s(e.desc))]),s("div",{staticClass:"doubI"},[s("i",{staticClass:"el-icon-edit-outline",on:{click:function(e){return t.UpClass(a)}}}),s("i",{staticClass:"el-icon-delete",on:{click:function(s){return t.ifDelClass(e.id)}}})])])])})),0),s("div",{staticClass:"paging"},[t.ispage?s("el-pagination",{attrs:{"current-page":t.activePage,"page-size":12,"pager-count":5,layout:"prev, pager, next",total:t.totalPage},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.activePage=e},"update:current-page":function(e){t.activePage=e}}}):t._e()],1),s("el-dialog",{attrs:{title:"添加班级",visible:t.dialogVisible,width:"45%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[s("el-form",{staticClass:"demo-ruleForm",staticStyle:{width:"85%",margin:"0 auto"},attrs:{model:t.pubForm}},[s("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{label:"班级",prop:"name"}},[s("el-input",{attrs:{placeholder:"输入班级号",oninput:"value=value.replace(/[^\\d]/g,'')"},model:{value:t.pubForm.title,callback:function(e){t.$set(t.pubForm,"title",e)},expression:"pubForm.title"}})],1),s("el-form-item",{attrs:{label:"描述",prop:"desc"}},[s("el-input",{attrs:{type:"textarea",placeholder:"输入描述"},model:{value:t.pubForm.content,callback:function(e){t.$set(t.pubForm,"content",e)},expression:"pubForm.content"}})],1)],1),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(e){return t.canselSpeach()}}},[t._v("取消")]),s("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.pubSpeach()}}},[t._v("确定")])],1)],1)],1)},lt=[],ut={name:"course",data:function(){return{param:new FormData,dialogVisible:!1,ispage:!1,activePage:1,totalPage:1,classUrl:"",pubForm:{id:"",title:"",content:""},DataList:[],testList:[{id:"12",name:"给他与他",desc:"共和国附件"}]}},mounted:function(){this.getToken()&&this.getListParam()},methods:{getListParam:function(){var t=sessionStorage.getItem("nowPage");this.activePage=t?parseInt(t):this.activePage,this.param.set("token",this.getToken()),this.param.set("currentPage",this.activePage),this.param.set("pageNum",12),this.classUrl=this.$baseUrl+"/class/show",this.realGotData()},realGotData:function(){var t=this;this.axios.post(this.classUrl,this.param).then((function(e){var s=e.data,a={};t.DataList=[];var i=function(t){return a={id:t.id,name:t.classNum,desc:t.description},a};if(200==s.code){if(console.log(s.data),t.totalPage=s.data.totalNumber,Array.isArray(s.data.pageData)){var n=!0,o=!1,r=void 0;try{for(var c,l=s.data.pageData[Symbol.iterator]();!(n=(c=l.next()).done);n=!0){var u=c.value;t.DataList.push(i(u))}}catch(h){o=!0,r=h}finally{try{n||null==l.return||l.return()}finally{if(o)throw r}}}else t.$message.warning(t.name+"列表为空！");t.totalPage>12&&(t.ispage=!0)}else t.$message.error("获取"+t.name+"列表失败！")})).catch((function(e){console.log(e),t.DataList=t.testList}))},addClass:function(){this.dialogVisible=!0},canselSpeach:function(){this.pubForm.id="",this.pubForm.title="",this.pubForm.content="",this.dialogVisible=!1},pubSpeach:function(){if(""!=this.pubForm.title)if(""!=this.pubForm.content){var t=this,e=new FormData,s="",a="",i=this.pubForm.id;i?(a=this.$baseUrl+"/class/update",e.set("id",i),s="修改班级"):(a=this.$baseUrl+"/class/create",s="创建班级"),e.set("token",this.param.get("token")),e.set("classNum",this.pubForm.title),e.set("description",this.pubForm.content),this.axios.post(a,e).then((function(e){console.log(e.data),200==e.data.code?(t.$message.success(s+"成功！"),t.canselSpeach(),t.realGotData()):t.$message.error(s+"失败！")})).catch((function(t){console.log(t)}))}else this.$message.error("班级描述不能为空！");else this.$message.error("创建班级不能为空！")},UpClass:function(t){this.dialogVisible=!0,this.pubForm.id=this.DataList[t].id,this.pubForm.title=this.DataList[t].name,this.pubForm.content=this.DataList[t].desc},ifDelClass:function(t){var e=this;this.$confirm("确认删除该条信息？").then((function(){e.DoDel(t)})).catch((function(){}))},DoDel:function(t){var e=this,s=this.$baseUrl+"/class/delete",a=new FormData;a.set("token",this.getToken()),a.set("id",t),this.axios.post(s,a).then((function(t){console.log(t),200==t.data.code?(e.realGotData(),e.$message.success("删除成功！")):e.$message.error("删除失败！")})).catch((function(t){console.log(t)}))},goCommunity:function(t){this.$router.push("/Communicate/"+t)},getToken:function(){var t=sessionStorage.getItem("token");if(null!=t)return t.slice(1,t.length-1)},handleCurrentChange:function(t){console.log("当前页: ".concat(t)),this.param.set("currentPage",this.activePage),this.realGotData(),sessionStorage.setItem("nowPage",JSON.stringify(this.activePage))}}},ht=ut,mt=(s("a2e6"),Object(u["a"])(ht,ct,lt,!1,null,"6d1122ba",null)),dt=mt.exports,pt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"course"},[t._m(0),s("ul",{staticClass:"showCourse"},t._l(t.DataList,(function(e,a){return s("li",{key:a,on:{click:function(e){return t.gotoPart(a)}}},[s("el-badge",{staticClass:"item dot",attrs:{"is-dot":e.isRead}},[s("p",[t._v(t._s(e.name)+t._s(e.tipmsg)+":")]),s("p",[t._v(t._s(e.content)+"……")]),s("p",[t._v("发布时间："+t._s(e.time))])])],1)})),0),s("div",{staticClass:"paging"},[t.ispage?s("el-pagination",{attrs:{"current-page":t.activePage,"page-size":6,"pager-count":5,layout:"prev, pager, next",total:t.totalPage},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.activePage=e},"update:current-page":function(e){t.activePage=e}}}):t._e()],1)])},gt=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",{staticClass:"newsHead"},[s("li",[t._v("新消息")])])}],ft={name:"course",data:function(){return{param:new FormData,dialogVisible:!1,ispage:!1,activePage:1,totalPage:1,classUrl:"",pubForm:{id:"",title:"",content:""},DataList:[]}},mounted:function(){this.getToken()&&this.getListParam()},methods:{getListParam:function(){var t=sessionStorage.getItem("nowPage");this.activePage=t?parseInt(t):this.activePage,this.param.set("token",this.getToken()),this.param.set("currentPage",this.activePage),this.param.set("pageNum",6),this.classUrl=this.$baseUrl+"/messages",this.realGotData()},realGotData:function(){var t=this;this.axios.post(this.classUrl,this.param).then((function(e){var s=e.data,a={};t.DataList=[];var i=function(t){return a={id:t.id,name:t.name,content:t.content,contentId:t.contentId,category:t.category,tipmsg:"",time:t.time,isRead:0==t.isRead},a};if(200==s.code){if(console.log(s.data),t.totalPage=s.data.totalNumber,Array.isArray(s.data.pageData)){var n=!0,o=!1,r=void 0;try{for(var c,l=s.data.pageData[Symbol.iterator]();!(n=(c=l.next()).done);n=!0){var u=c.value,h=i(u);"course"==u.category?h.tipmsg="（课程区）回复了您":"class"==u.category?h.tipmsg="（班级区）回复了您":"notice"==u.category?h.tipmsg="发布了通知":h.tipmsg="发布了作业",t.DataList.push(h)}}catch(m){o=!0,r=m}finally{try{n||null==l.return||l.return()}finally{if(o)throw r}}}else t.$message.warning(t.name+"列表为空！");t.totalPage>6&&(t.ispage=!0)}else t.$message.error("获取"+t.name+"列表失败！")})).catch((function(t){console.log(t)}))},MarkRead:function(t,e){var s=this.$baseUrl+"/markAsRead",a=new FormData;a.set("token",this.getToken()),a.set("msgUserId",e),"course"==t||"class"==t?a.set("type",1):a.set("type",0),this.axios.post(s,a).then((function(t){console.log(t)})).catch((function(t){console.log(t)}))},gotoPart:function(t){var e=this.DataList[t].category;switch(this.DataList[t].isRead&&this.MarkRead(e,this.DataList[t].id),e){case"course":this.$router.push({path:"/Comment",query:{id:this.DataList[t].contentId,name:"msg"}});break;case"class":this.$router.push({path:"/Comment",query:{id:this.DataList[t].contentId,name:"123"}});break;case"homework":break;case"notice":break;default:break}},getToken:function(){var t=sessionStorage.getItem("token");return t.slice(1,t.length-1)},handleCurrentChange:function(t){console.log("当前页: ".concat(t)),this.param.set("currentPage",this.activePage),this.realGotData(),sessionStorage.setItem("nowPage",JSON.stringify(this.activePage))}}},vt=ft,bt=(s("14c1"),Object(u["a"])(vt,pt,gt,!1,null,"177272fa",null)),wt=bt.exports,Ct=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"StuProgress"},[s("div",{staticClass:"stuHead"},[s("ul",[s("li",[t._v(t._s(t.stuTitle)+" ")])]),s("div",{staticClass:"search"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.searches,expression:"searches"}],attrs:{type:"text",name:"search",placeholder:"请输入学号",autocomplete:"off"},domProps:{value:t.searches},on:{input:function(e){e.target.composing||(t.searches=e.target.value)}}}),s("i",{staticClass:"el-icon-search",on:{click:function(e){return t.Searching()}}})])]),s("ul",{staticClass:"stuTable"},[s("li",[s("el-row",[s("el-col",{attrs:{span:4}},[t._v("学号")]),s("el-col",{attrs:{span:4}},[t._v("姓名")]),s("el-col",{attrs:{span:5}},[t._v("手机号")]),s("el-col",{attrs:{span:4}},[t._v("是否结业")]),s("el-col",{attrs:{span:7}},[t._v("学习进度")])],1)],1),t._l(t.TableList,(function(e,a){return s("li",{key:a},[s("el-row",[s("el-col",{attrs:{span:4}},[t._v(t._s(e.acount))]),s("el-col",{attrs:{span:4}},[t._v(t._s(e.name))]),s("el-col",{attrs:{span:5}},[t._v(t._s(e.phone))]),s("el-col",{attrs:{span:4}},[t._v(t._s(e.graduated))]),s("el-col",{staticStyle:{"padding-top":"1px"},attrs:{span:7}},[s("el-progress",{attrs:{percentage:e.percent}})],1)],1)],1)}))],2),s("div",{staticClass:"paging"},[t.ispage?s("el-pagination",{attrs:{"current-page":t.activePage,"page-size":12,"pager-count":5,layout:"prev, pager, next",total:t.totalPage},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.activePage=e},"update:current-page":function(e){t.activePage=e}}}):t._e()],1)])},kt=[],_t={name:"StuProgress",data:function(){return{param:new FormData,stuTitle:"学生账号管理",searching:"",activePage:1,totalPage:1,ispage:!1,searches:"",TableList:[]}},mounted:function(){this.getToken()&&this.addParamValue()},methods:{handleCurrentChange:function(t){console.log("当前页: ".concat(t)),this.param.set("currentPage",this.activePage),this.getAcount(),sessionStorage.setItem("nowPage",JSON.stringify(this.activePage))},addParamValue:function(){var t=sessionStorage.getItem("courseID"),e=sessionStorage.getItem("nowPage");console.log(e),this.activePage=e?parseInt(e):this.activePage,this.param.set("token",this.getToken()),this.param.set("currentPage",this.activePage),this.param.set("pageNum",10),this.param.set("course_id",t),this.getAcount()},getAcount:function(){var t=this;this.axios.post(this.$baseUrl+"/course/progress",this.param).then((function(e){console.log(e.data);var s={};t.TableList=[];var a=function(t){return s={acount:t.student.username,name:t.student.name,phone:t.student.phone?t.student.phone:"未设置",graduated:0==t.graduated?"待结业":"已结业",percent:t.learningProgress},s};if(200==e.data.code){if(e=e.data.data,t.totalNum=e.totalNumber,Array.isArray(e.pageData)){var i=!0,n=!1,o=void 0;try{for(var r,c=e.pageData[Symbol.iterator]();!(i=(r=c.next()).done);i=!0){var l=r.value;t.TableList.push(a(l))}}catch(u){n=!0,o=u}finally{try{i||null==c.return||c.return()}finally{if(n)throw o}}}else t.$message.warning(t.name+"列表为空！");t.ispage=!0}else t.$message.error("获取"+t.name+"列表失败！")})).catch((function(t){console.log(t)}))},Searching:function(){var t=new FormData;t.set("token",this.param.get("token")),t.set("currentPage",this.param.get("currentPage")),t.set("pageNum",this.param.get("pageNum")),""!=this.searches?("2"==this.searches[0]?t.set("stuNum",this.searches):"0"==this.searches[0]?t.set("classNum",this.searches):t.set("stuName",this.searches),console.log(t.get("pageNum")),this.getAcount(t)):this.$message.error("请输入查找信息！")},getToken:function(){var t=sessionStorage.getItem("token");return t.slice(1,t.length-1)}}},yt=_t,It=(s("89a2"),Object(u["a"])(yt,Ct,kt,!1,null,"05efcd60",null)),$t=It.exports,Pt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"addCourse"},[s("div",{staticClass:"pubHead"},[s("i",{staticClass:"el-icon-back",on:{click:function(e){return t.goBack()}}}),s("p",[t._v(t._s(t.title)+"课程")]),s("div",{staticClass:"selectStu",on:{click:function(e){return t.checkAndUp()}}},[t._v(t._s(t.title))])]),s("hr"),s("div",{staticClass:"mainInfo"},[s("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm,rules:t.rules,"label-width":"100px","label-position":"left"}},[s("el-form-item",{attrs:{label:"课程名",prop:"name"}},[s("el-input",{attrs:{placeholder:"请输入课程名"},model:{value:t.ruleForm.name,callback:function(e){t.$set(t.ruleForm,"name",e)},expression:"ruleForm.name"}})],1),s("el-form-item",{attrs:{label:"课程简介",prop:"desc"}},[s("el-input",{attrs:{type:"textarea",placeholder:"请输入课程简介"},model:{value:t.ruleForm.desc,callback:function(e){t.$set(t.ruleForm,"desc",e)},expression:"ruleForm.desc"}})],1),s("el-form-item",{attrs:{label:"邀请码",prop:"invite"}},[s("el-input",{attrs:{maxlength:6,change:t.onChange(),placeholder:"请设置6位邀请码"},model:{value:t.ruleForm.invite,callback:function(e){t.$set(t.ruleForm,"invite",e)},expression:"ruleForm.invite"}})],1),s("el-form-item",{attrs:{label:"课程封面",prop:"cover"}},[s("el-upload",{class:{disabled:t.isFine},attrs:{action:"#","list-type":"picture-card","on-remove":t.handleRemove,"on-change":t.handleChange,"auto-upload":!1}},[s("i",{staticClass:"el-icon-plus",attrs:{slot:"default"},slot:"default"})])],1)],1)],1)])},xt=[],Tt={name:"addCourse",data:function(){var t=function(t,e,s){""===e?s(new Error("课程名不能为空")):s()},e=function(t,e,s){""===e?s(new Error("简介不能为空")):s()},s=function(t,e,s){""===e?s(new Error("邀请码不能为空")):e.length<6?s(new Error("请输入6位邀请码！")):s()};return{param:new FormData,isFine:!1,title:"创建",ruleForm:{name:"",desc:"",cover:"",id:"",invite:""},old:{name:"",desc:"",cover:"",id:"",invite:""},rules:{name:[{validator:t,trigger:"blur"}],desc:[{validator:e,trigger:"blur"}],invite:[{validator:s,trigger:"blur"}]}}},mounted:function(){this.getToken()&&this.getOldInfo()},methods:{handleRemove:function(t,e){console.log(e.length),e.length<1&&(this.isFine=!1)},goBack:function(){console.log("go back"),this.$router.go(-1)},getToken:function(){var t=sessionStorage.getItem("token");return t.slice(1,t.length-1)},checkAndUp:function(){var t="";if(this.param.set("token",this.getToken()),this.$route.query.id)this.ruleForm.name!=this.old.name&&this.param.set("title",this.ruleForm.name),this.ruleForm.desc!=this.old.desc&&this.param.set("description",this.ruleForm.desc),console.log(this.ruleForm.invite,this.old.invite),this.ruleForm.invite!=this.old.invite&&this.param.set("code",this.ruleForm.invite),this.param.set("id",this.ruleForm.id),t=this.$baseUrl+"/course/update";else{if(""==this.ruleForm.name)return void this.$message.error("课程名不能为空！");if(""==this.ruleForm.desc)return void this.$message.error("课程简介不能为空！");if(""==this.ruleForm.invite)return void this.$message.error("邀请码不能为空！");if(""==this.param.get("pic"))return void this.$message.error("请上传封面图片！");this.param.set("title",this.ruleForm.name),this.param.set("code",this.ruleForm.invite),this.param.set("description",this.ruleForm.desc),t=this.$baseUrl+"/course/create"}this.createCourse(t)},createCourse:function(t){var e=this;this.axios.post(t,this.param).then((function(t){200==t.data.code?(e.$message.success(e.title+"成功！"),e.$router.push("/course")):e.$message.error(e.title+"失败！")})).catch((function(t){console.log(t)}))},handleChange:function(t,e){this.param.set("pic",t.raw),console.log(e.length),e.length>=1&&(this.isFine=!0)},getOldInfo:function(){var t=this.$route.query;t.id&&(this.title="修改",this.ruleForm.name=t.name,this.ruleForm.id=t.id,this.ruleForm.cover=t.cover,this.ruleForm.desc=t.desc,this.ruleForm.invite=t.code,this.old.name=t.name,this.old.id=t.id,this.old.cover=t.cover,this.old.desc=t.desc,this.old.invite=t.code)},onChange:function(){var t=this.ruleForm.invite,e=!0,s=!1,a=void 0;try{for(var i,n=t[Symbol.iterator]();!(e=(i=n.next()).done);e=!0){var o=i.value,r=o<="z"&&o>="a"||o>="A"&&o<="Z"||o>="0"&&o<="9";r||(this.ruleForm.invite=this.ruleForm.invite.replace(o,""))}}catch(c){s=!0,a=c}finally{try{e||null==n.return||n.return()}finally{if(s)throw a}}}}},Dt=Tt,St=(s("9594"),Object(u["a"])(Dt,Pt,xt,!1,null,null,null)),Ft=St.exports,Ut=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"UpCourseWare"},[s("ul",{staticClass:"newsHead"},[s("li",[t._v("课程列表")]),s("li",{on:{click:function(e){return t.goWare()}}},[t._v("上传课件")]),s("li",{on:{click:t.addCHP}},[t._v("创建章节")])]),s("el-row",[s("el-col",{attrs:{span:6}},[s("div",{staticClass:"courseTab"},t._l(t.section,(function(e,a){return s("ul",{key:a},[s("li",{on:{click:function(e){return t.ClickSec(a)}}},[s("p",{attrs:{title:e.name}},[t._v("第"+t._s(a+1)+"章："+t._s(e.name))]),s("i",{class:e.showMore?"el-icon-arrow-up":"el-icon-arrow-down"})]),t._l(e.chapter,(function(i,n){return s("li",{directives:[{name:"show",rawName:"v-show",value:e.showMore,expression:"sec.showMore"}],key:n,class:[t.choseSecChp.secIndex==a&&t.choseSecChp.chpIndex==n?"isActive":""],on:{click:function(e){return t.ChoiceChp(a,n)}}},[s("p",{attrs:{title:i.title}},[t._v("第"+t._s(n+1)+"节："+t._s(i.title))])])})),s("li",{directives:[{name:"show",rawName:"v-show",value:e.showMore,expression:"sec.showMore"}],on:{click:function(e){return t.appchp(a)}}},[s("i",{staticClass:"el-icon-circle-plus"}),t._v("\n\t  \t\t\t\t新增小节\n\t  \t\t\t")])],2)})),0)]),t.ifuploaded?s("el-col",{attrs:{span:18}},[s("div",{staticClass:"upVideo"},[s("div",{staticClass:"SEC"},[s("p",[t._v(t._s(t.secname))]),s("i",{staticClass:"el-icon-edit-outline",on:{click:function(e){return t.resetName()}}}),s("div",{staticClass:"operate"},[s("i",{staticClass:"el-icon-delete",on:{click:function(e){return t.Delete()}}})])]),s("ul",{directives:[{name:"show",rawName:"v-show",value:"SEC"==t.choseSecChp.theGrade?t.section[t.choseSecChp.secIndex].edit:t.section[t.choseSecChp.secIndex].chapter[t.choseSecChp.chpIndex].edit,expression:"choseSecChp.theGrade == 'SEC'? \n\t\t  \t\tsection[choseSecChp.secIndex].edit : \n\t\t  \t\tsection[choseSecChp.secIndex].chapter[choseSecChp.chpIndex].edit"}],staticClass:"EditName"},[s("li",[s("p",[t._v("设置章节名")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.resetWeight.name,expression:"resetWeight.name"}],attrs:{type:"text",placeholder:"请输入章节名"},domProps:{value:t.resetWeight.name},on:{input:function(e){e.target.composing||t.$set(t.resetWeight,"name",e.target.value)}}})]),s("li",[s("p",[t._v("权重")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.resetWeight.weight,expression:"resetWeight.weight"}],attrs:{type:"text",placeholder:"请输入权值",oninput:"value=value.replace(/[^\\d]/g,'')"},domProps:{value:t.resetWeight.weight},on:{input:function(e){e.target.composing||t.$set(t.resetWeight,"weight",e.target.value)}}})]),s("li",{staticClass:"confirm"},[s("p",{staticStyle:{background:"grey",color:"#fff"},on:{click:function(e){return t.noResetName()}}},[t._v("取消")]),s("p",{on:{click:function(e){return t.setPerName()}}},[t._v("确定")])])]),"chp"==t.choseSecChp.theGrade?s("div",{staticClass:"showVideo"},[t.section[t.choseSecChp.secIndex].chapter[t.choseSecChp.chpIndex].url&&t.noEdit?s("div",{staticClass:"haveVideo"},[s("video",{attrs:{src:t.imgUrl+t.section[t.choseSecChp.secIndex].chapter[t.choseSecChp.chpIndex].url,alt:"路径错误！",controls:"controls"}})]):s("div",{staticClass:"uploadVideo"},[s("el-upload",{staticClass:"avatar-uploader el-upload--text",attrs:{action:t.uploadUrl,"show-file-list":!1,data:t.videoData,"on-success":t.handleVideoSuccess,"before-upload":t.beforeUploadVideo,"on-progress":t.uploadVideoProcess}},[0==t.videoFlag?s("div",{staticStyle:{width:"80px",height:"80px",border:"1px solid grey","border-radius":"5px",display:"flex","align-items":"center","justify-content":"center"}},[s("i",{staticClass:"el-icon-plus avatar-uploader-icon",staticStyle:{"font-size":"30px",color:"grey"}})]):t._e()]),1==t.videoFlag?s("el-progress",{staticStyle:{"margin-top":"30px"},attrs:{type:"circle",percentage:t.videoUploadPercent}}):t._e(),s("p",{staticClass:"text"},[t._v("请上传MP4格式视频！")])],1)]):t._e()])]):t._e()],1)],1)},Lt=[],Nt={name:"UpCourseWare",data:function(){return{imgUrl:"",getListUrl:"",param:new FormData,uploadUrl:"",noEdit:!0,videoFlag:!1,videoUploadPercent:0,videoData:{token:"",title:"",weights:"",superiorId:""},course:{name:"",id:""},choseSecChp:{theGrade:"SEC",secIndex:"0",chpIndex:"0"},resetWeight:{name:"",weight:""},secname:"",ifuploaded:!1,isChp:!1,originSec:{showMore:!0,name:"新一章",edit:!1,chapter:[{title:"新一节",videoUrl:"",edit:!1}]},orginchp:{title:"新一节",videoUrl:"",edit:!1},section:[]}},created:function(){this.getToken()&&(this.addGetParam(),this.imgUrl=this.$ImgUrl+"/video/")},methods:{addGetParam:function(){var t=this.$baseUrl+"/courseInfo/";this.course.id=sessionStorage.getItem("courseID"),this.course.name=sessionStorage.getItem("courseName"),this.param.set("token",this.getToken()),this.getListUrl=t+this.course.id,this.getCourseTitle()},getCourseTitle:function(){var t=this;this.axios.post(this.getListUrl,this.param).then((function(e){var s=e.data;console.log(s.data);var a={};t.section=[];var i=function(t){return a={id:t.id,title:t.title,url:t.url,edit:!1},a};if(200==s.code){if(!(s.data.chapterDtoList.length>0))return t.ifuploaded=!1,void t.$message.warning("暂无章节");var n=!0,o=!1,r=void 0;try{for(var c,l=s.data.chapterDtoList[Symbol.iterator]();!(n=(c=l.next()).done);n=!0){var u=c.value,h={showMore:!1,edit:!1,id:"",name:"",chapter:[]};if(h.id=u.id,h.name=u.title,Array.isArray(u.sectionList)){var m=!0,d=!1,p=void 0;try{for(var g,f=u.sectionList[Symbol.iterator]();!(m=(g=f.next()).done);m=!0){var v=g.value;h.chapter.push(i(v))}}catch(b){d=!0,p=b}finally{try{m||null==f.return||f.return()}finally{if(d)throw p}}t.ifuploaded=!0}else console.log("no chapter!");t.section.push(h)}}catch(b){o=!0,r=b}finally{try{n||null==l.return||l.return()}finally{if(o)throw r}}}else t.$message.error("获取"+t.name+"列表失败！");t.ClickSec(0)})).catch((function(e){t.$message.warning(e)}))},getToken:function(){var t=sessionStorage.getItem("token");return t.slice(1,t.length-1)},beforeUploadVideo:function(t){return""==this.videoData.title||""==this.videoData.weight?(this.$message.warning("请先设置小节名和权重！"),!1):-1==["video/mp4"].indexOf(t.type)?(this.$message.error("请上传正确的视频格式"),!1):void 0},uploadVideoProcess:function(t,e,s){this.videoFlag=!0,this.videoUploadPercent=parseInt(e.percentage.toFixed(0))},handleVideoSuccess:function(t,e){this.videoFlag=!1,this.videoUploadPercent=0,console.log(t),200==t.code?(this.$message.success("视频上传成功！"),this.noEdit=!0,this.getCourseTitle()):this.$message.error("视频上传失败，请重新上传！")},addCHP:function(){var t=this;this.section.push(this.originSec),this.ifuploaded=!0;var e=new FormData;e.set("title",this.originSec.name),e.set("weights",1),e.set("token",this.getToken()),e.set("superiorId",this.course.id),this.axios.post(this.$baseUrl+"/chapter/create",e).then((function(e){console.log(e),t.getCourseTitle()}))},appchp:function(t){this.section[t].chapter.push(this.orginchp)},ClickSec:function(t){this.section[t].showMore=!this.section[t].showMore,this.isChp=!1,this.choseSecChp.theGrade="SEC",this.choseSecChp.secIndex=t,this.secname="第"+(t+1)+"章  "+this.section[t].name},resetName:function(){this.resetWeight.name="",this.resetWeight.weight="","SEC"==this.choseSecChp.theGrade?this.section[this.choseSecChp.secIndex].edit=!0:(this.noEdit=!1,this.section[this.choseSecChp.secIndex].chapter[this.choseSecChp.chpIndex].edit=!0)},noResetName:function(){"SEC"==this.choseSecChp.theGrade?this.section[this.choseSecChp.secIndex].edit=!1:(this.noEdit=!0,this.section[this.choseSecChp.secIndex].chapter[this.choseSecChp.chpIndex].edit=!1)},setPerName:function(){var t=this;if(""!=this.resetWeight.name)if(""!=this.resetWeight.weight)if("SEC"==this.choseSecChp.theGrade){var e=new FormData,s=this.choseSecChp.secIndex;e.set("title",this.resetWeight.name),e.set("weights",this.resetWeight.weight),e.set("token",this.getToken()),e.set("id",this.section[s].id),this.axios.post(this.$baseUrl+"/chapter/update",e).then((function(e){console.log(e),t.getCourseTitle()})),this.section[this.choseSecChp.secIndex].edit=!1}else{var a=this.section[this.choseSecChp.secIndex].chapter[this.choseSecChp.chpIndex];if(this.videoData.token=this.getToken(),this.videoData.superiorId=this.section[this.choseSecChp.secIndex].id,this.videoData.weights=this.resetWeight.weight,this.videoData.title=this.resetWeight.name,a.id){this.$set(this.videoData,"id",a.id);var i=new FormData;i.set("token",this.getToken()),i.set("superiorId",this.section[this.choseSecChp.secIndex].id),i.set("title",this.resetWeight.name),i.set("weights",this.resetWeight.weight),i.set("id",a.id),this.uploadUrl=this.$baseUrl+"/section/update",this.axios.post(this.uploadUrl,i).then((function(e){console.log(e),t.getCourseTitle()}))}else this.uploadUrl=this.$baseUrl+"/section/create";this.section[this.choseSecChp.secIndex].chapter[this.choseSecChp.chpIndex].edit=!1}else this.$message.warning("权重不能为空！");else this.$message.warning("标题不能为空！")},ChoiceChp:function(t,e){this.isChp=!0,this.choseSecChp.theGrade="chp",this.choseSecChp.secIndex=t,this.choseSecChp.chpIndex=e,this.secname=t+1+"-"+(e+1)+"节："+this.section[t].chapter[e].title},Delete:function(){var t=this;this.$confirm("是否确认删除该章节？").then((function(){var e=t.choseSecChp;"SEC"==e.theGrade?t.DeleteDOM(t.$baseUrl+"/chapter/delete/"+t.section[e.secIndex].id):t.section[e.secIndex].chapter[e.chpIndex].id?t.DeleteDOM(t.$baseUrl+"/section/delete/"+t.section[e.secIndex].chapter[e.chpIndex].id):t.getCourseTitle()}))},DeleteDOM:function(t){var e=this,s=new FormData;s.set("token",this.getToken()),this.axios.post(t,s).then((function(t){console.log(t.data),200==t.data.code?(e.$message.success("删除成功！"),e.getCourseTitle()):e.$message.error("删除失败！")}))},goWare:function(){this.$router.push("/CourseWare")}}},Et=Nt,At=(s("b548"),Object(u["a"])(Et,Ut,Lt,!1,null,"4752d672",null)),Ot=At.exports,Bt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"UpCourseWare"},[s("ul",{staticClass:"newsHead"},[s("li",{on:{click:function(e){return t.goUpload()}}},[t._v("课程列表")]),s("li",[t._v("课件列表")]),s("li",{directives:[{name:"show",rawName:"v-show",value:!t.isadd,expression:"!isadd"}],on:{click:function(e){t.isadd=!0}}},[t._v("上传课件")])]),t.isadd?s("div",{staticClass:"addWare"},[s("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:"#",multiple:"","on-change":t.handlePPT,"on-preview":t.handlePreview,"on-remove":t.handleRemove,"file-list":t.fileList,"auto-upload":!1}},[s("div",{staticClass:"addBtn",attrs:{slot:"trigger"},slot:"trigger"},[t._v("选取文件")]),s("div",{staticClass:"addBtn",on:{click:t.submitUpload}},[t._v("确定上传")]),s("div",{staticClass:"el-upload__tip",staticStyle:{"border-top":"1px solid black","margin-top":"5px","padding-top":"10px"},attrs:{slot:"tip"},slot:"tip"},[t._v("文件预览")])])],1):s("div",{staticClass:"PPTlist"},[s("ul",{staticClass:"PList"},[t._m(0),t._l(t.pptList,(function(e,a){return s("li",{key:a},[s("p",[t._v(t._s(e.title))]),s("p",[t._v(t._s(e.time))]),s("p",[s("a",{attrs:{href:t.imgUrl+e.url,download:e.title}},[s("i",{staticClass:"el-icon-download"})])])])}))],2),s("div",{staticClass:"Page"},[s("el-pagination",{attrs:{"current-page":t.activePage,"page-size":10,"pager-count":5,layout:"prev, pager, next",total:t.totalPage},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.activePage=e},"update:current-page":function(e){t.activePage=e}}})],1)])])},jt=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("li",[s("p",[t._v("课件名")]),s("p",[t._v("上传时间")]),s("p",[t._v("下载课件")])])}],Vt={name:"UpCourseWare",data:function(){return{imgUrl:"",param:new FormData,courseID:"",totalPage:1,activePage:1,url:"",isadd:!1,fileList:[],name:"课件",pptList:[]}},mounted:function(){this.getToken()&&(this.addWareParam(),this.imgUrl=this.$ImgUrl+"/courseware/")},methods:{submitUpload:function(){var t=this,e=this,s=new FormData,a=!0,i=!1,n=void 0;try{for(var o,r=this.fileList[Symbol.iterator]();!(a=(o=r.next()).done);a=!0){var c=o.value;s.set("multipartFile",c.raw)}}catch(l){i=!0,n=l}finally{try{a||null==r.return||r.return()}finally{if(i)throw n}}s.set("superiorId",this.courseID),s.set("token",this.getToken()),this.axios.post(this.$baseUrl+"/uploadCourseware",s).then((function(s){console.log(s),200==s.data.code?(e.$message.success("上传成功！"),t.isadd=!1,e.viewWare()):e.$message.error("请选择PPT格式文件！")})).catch((function(t){console.log(t)}))},handleRemove:function(t,e){console.log(t,e)},handlePreview:function(t){console.log(t)},handlePPT:function(t,e){this.fileList=e},goUpload:function(){this.$router.push("/CourseUpload")},addWareParam:function(){var t=sessionStorage.getItem("nowPage");this.activePage=t?parseInt(t):this.activePage,this.url=this.$baseUrl+"/coursewares",this.courseID=sessionStorage.getItem("courseID"),this.param.set("id",this.courseID),this.param.set("token",this.getToken()),this.param.set("pageNum",10),this.param.set("currentPage",this.activePage),this.viewWare()},viewWare:function(){var t=this;this.axios.post(this.url,this.param).then((function(e){e=e.data;var s={};t.pptList=[];var a=function(t){return s={id:t.id,title:t.title,url:t.url,time:t.time},s};if(200==e.code)if(console.log(e.data),t.totalPage=e.data.totalNumber,console.log(Array.isArray(e.data.pageData)),Array.isArray(e.data.pageData)){var i=!0,n=!1,o=void 0;try{for(var r,c=e.data.pageData[Symbol.iterator]();!(i=(r=c.next()).done);i=!0){var l=r.value;t.pptList.push(a(l))}}catch(u){n=!0,o=u}finally{try{i||null==c.return||c.return()}finally{if(n)throw o}}}else t.$message.warning("暂无课件！");else t.$message.error("获取"+t.name+"列表失败！")}))},getToken:function(){var t=sessionStorage.getItem("token");return t.slice(1,t.length-1)},handleCurrentChange:function(t){console.log("当前页: ".concat(t)),this.param.delete("currentPage"),this.param.set("currentPage",this.activePage),this.$router.push("/News/".concat(this.name,"/page=").concat(t)),this.viewWare()}}},Wt=Vt,Mt=(s("cf88"),Object(u["a"])(Wt,Bt,jt,!1,null,"f93cc7a8",null)),qt=Mt.exports,Ht=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"news"},[s("div",{staticClass:"newsHead"},[s("ul",{staticClass:"tabs"},[s("li",{style:"作业"==t.category?"":{background:"#90a7a6"},on:{click:function(e){return t.$router.push("/Exam/test")}}},[t._v("作业管理")]),s("li",{style:"考试"==t.category?"":{background:"#90a7a6"},on:{click:function(e){return t.$router.push("/Exam/homework")}}},[t._v("考试管理")])]),s("ul",{staticClass:"add"},[s("li",{on:{click:function(e){return t.publish()}}},[t._v("发布"+t._s(t.category))])])]),s("div",{staticClass:"showList"},t._l(t.showList,(function(e,a){return s("el-row",{key:a},[s("el-col",{attrs:{span:22},nativeOn:{click:function(s){return t.showWork(e.id)}}},[s("div",{staticClass:"main"},[s("p",[t._v(t._s(e.title))]),s("p",[t._v("作业时间： "+t._s(e.startTime)+" — "+t._s(e.endTime))])]),s("div",{staticClass:"graded"},[t._v("评分")])]),s("el-col",{attrs:{span:2}},[s("div",{staticClass:"operate"},[s("i",{staticClass:"el-icon-document",attrs:{title:"详情"},on:{click:function(s){return t.Tdetails(e.id)}}}),s("i",{staticClass:"el-icon-delete",attrs:{title:"删除"},on:{click:function(s){return t.TDelete(e.id)}}})])])],1)})),1),s("div",{staticClass:"paging"},[s("el-pagination",{attrs:{"current-page":t.activePage,"page-size":5,"pager-count":5,layout:"prev, pager, next",total:t.totalPage},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.activePage=e},"update:current-page":function(e){t.activePage=e}}})],1)])},Gt=[],Rt={name:"news",data:function(){return{param:new FormData,activePage:1,totalPage:1,category:"",name:"",url:"",showList:[]}},mounted:function(){this.getToken()&&this.getListParam()},methods:{getListParam:function(){var t=sessionStorage.getItem("courseID");this.url=this.$baseUrl+"/homework/show";var e=this.$route.params.name;this.category="test"==e?"作业":"考试",this.name=e;var s=sessionStorage.getItem("nowPage");console.log(s),this.activePage=s?parseInt(s):this.activePage,this.param.set("courseId",t),this.param.set("category",e),this.param.set("token",this.getToken()),this.param.set("pageNum",8),this.param.set("currentPage",this.activePage),this.getListData()},getListData:function(){var t=this;this.axios.post(this.url,this.param).then((function(e){e=e.data,console.log(e);var s={};t.showList=[];var a=function(t){return s={id:t.id,title:t.title,publisher:t.publisherId,startTime:t.startTime,endTime:t.endTime},s};if(200==e.code)if(console.log(e.data),t.totalPage=e.data.totalNumber,Array.isArray(e.data.pageData)){var i=!0,n=!1,o=void 0;try{for(var r,c=e.data.pageData[Symbol.iterator]();!(i=(r=c.next()).done);i=!0){var l=r.value;t.showList.push(a(l))}}catch(u){n=!0,o=u}finally{try{i||null==c.return||c.return()}finally{if(n)throw o}}}else t.$message.warning("暂无数据！");else t.$message.error("获取"+t.name+"列表失败！")}))},handleCurrentChange:function(t){console.log("当前页: ".concat(t)),this.param.set("currentPage",this.activePage),this.getListData(),sessionStorage.setItem("nowPage",JSON.stringify(this.activePage))},Tdetails:function(t){this.$router.push({path:"/Show",query:{name:this.name,id:t}})},TDelete:function(t){var e=this;this.$confirm("确认删除该条作业？").then((function(){e.deleteList(t)})).catch((function(){}))},deleteList:function(t){var e=this,s=this,a=new FormData,i=this.$baseUrl+"/homework/delete";a.set("id",t),a.set("token",this.getToken()),this.axios.post(i,a).then((function(t){console.log(t),200==t.data.code?(e.getListData(),s.$message.success("删除成功！")):s.$message.error("删除失败！")}))},publish:function(){this.$router.push({path:"/Publish",query:{name:this.name}})},showWork:function(t){console.log(t),this.$router.push({path:"/Homework",query:{name:this.name,id:t}})},getToken:function(){var t=sessionStorage.getItem("token");return t.slice(1,t.length-1)}}},zt=Rt,Jt=(s("fabf"),Object(u["a"])(zt,Ht,Gt,!1,null,"5df6326f",null)),Zt=Jt.exports,Qt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"course"},[s("ul",{staticClass:"newsHead"},["msg"!=t.name?s("li",[s("i",{staticClass:"el-icon-back",on:{click:function(e){return t.goBack()}}})]):t._e(),"msg"!=t.name?s("li",[t._v(t._s(t.title))]):t._e(),"msg"==t.name?s("li",{staticStyle:{background:"#099c4a",color:"#fff","border-radius":"5px"}},[t._v(t._s(t.title))]):t._e(),s("li",{on:{click:function(e){t.dialogVisible=!0}}},[t._v("提问")])]),s("ul",{staticClass:"TieList"},t._l(t.publishData,(function(e,a){return s("li",{key:a,on:{click:function(e){return t.PartDetail(a)}}},[s("img",{attrs:{src:t.imgUrl+e.cover}}),s("div",{staticClass:"part"},[s("p",[t._v(t._s(e.publisher)),e.rank?s("span",[t._v("老师")]):t._e(),s("span",[t._v(t._s(e.time))])]),s("p",[t._v(t._s(e.title))]),s("p",[t._v("评论:"+t._s(e.commentNum))])])])})),0),s("div",{staticClass:"paging"},[t.ispage?s("el-pagination",{attrs:{"current-page":t.activePage,"page-size":12,"pager-count":5,layout:"prev, pager, next",total:t.totalPage},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.activePage=e},"update:current-page":function(e){t.activePage=e}}}):t._e()],1),s("el-dialog",{attrs:{title:"提问",center:"",visible:t.dialogVisible,width:"80%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[s("el-form",{staticClass:"demo-ruleForm",staticStyle:{width:"85%",margin:"0 auto"},attrs:{model:t.pubForm}},[s("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{label:"话题",prop:"name"}},[s("el-input",{attrs:{placeholder:"输入话题"},model:{value:t.pubForm.title,callback:function(e){t.$set(t.pubForm,"title",e)},expression:"pubForm.title"}})],1),s("el-form-item",{attrs:{label:"内容",prop:"desc"}},[s("br"),s("Edit",{on:{newsEvent:t.showInfo}})],1)],1),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(e){return t.canselSpeach()}}},[t._v("取消")]),s("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.isSpeach()}}},[t._v("确定")])],1)],1)],1)},Kt=[],Yt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"edit_container"},[s("quill-editor",{ref:"myQuillEditor",attrs:{options:t.editorOption},on:{blur:function(e){return t.onEditorBlur(e)},focus:function(e){return t.onEditorFocus(e)},change:function(e){return t.onEditorChange(e)}},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1)},Xt=[],te={name:"edit_container",data:function(){return{content:"",editorOption:{modules:{toolbar:[["bold"],["image"]]}}}},computed:{editor:function(){return this.$refs.myQuillEditor.quill}},mounted:function(){this.content=this.Tcontent},methods:{onEditorReady:function(t){},onEditorBlur:function(){},onEditorFocus:function(){},onEditorChange:function(){this.$emit("newsEvent",this.content)}}},ee=te,se=(s("299c"),Object(u["a"])(ee,Yt,Xt,!1,null,null,null)),ae=se.exports,ie={name:"course",components:{Edit:ae},data:function(){return{imgUrl:"",param:new FormData,dialogVisible:!1,ispage:!1,title:"",name:"",activePage:1,totalPage:1,TieUrl:"",pubForm:{title:"",content:""},classList:[{id:"2",name:"049117"}],publishData:[]}},mounted:function(){this.getToken()&&(this.getListParam(),this.imgUrl=this.$ImgUrl+"/avatar/")},methods:{getListParam:function(){var t=this.$route.params.name;if(this.name=t,"msg"==t){this.title="课程留言";var e=sessionStorage.getItem("courseID");this.param.set("courseId",e),this.TieUrl=this.$baseUrl+"/courseDiscussion/questions/"+e}else this.title="班级讨论",this.TieUrl=this.$baseUrl+"/ClassDiscussion/questions/"+t;var s=sessionStorage.getItem("nowPage");console.log(s),this.activePage=s?parseInt(s):this.activePage,this.param.set("token",this.getToken()),this.param.set("currentPage",this.activePage),this.param.set("pageNum",12),this.realGotData()},realGotData:function(){var t=this;this.axios.post(this.TieUrl,this.param).then((function(e){var s=e.data,a={};t.publishData=[];var i=function(t){return a={TieID:t.id,publisher:t.userDto.name,cover:t.userDto.avatar,title:t.title,rank:1==t.isTeacher,commentNum:t.commentNum,time:t.time},a};if(200==s.code){if(console.log(s.data),t.totalPage=s.data.totalNumber,Array.isArray(s.data.pageData)){var n=!0,o=!1,r=void 0;try{for(var c,l=s.data.pageData[Symbol.iterator]();!(n=(c=l.next()).done);n=!0){var u=c.value;t.publishData.push(i(u))}}catch(h){o=!0,r=h}finally{try{n||null==l.return||l.return()}finally{if(o)throw r}}}else t.$message.warning(t.name+"列表为空！");t.ispage=!0}else t.$message.error("获取"+t.name+"列表失败！")})).catch((function(t){console.log(t)}))},canselSpeach:function(){this.pubForm.title="",this.pubForm.content="",this.dialogVisible=!1},isSpeach:function(){""!=this.pubForm.title&&""!=this.pubForm.content?this.pubSpeach():this.$message.error("题目和内容不能为空!")},pubSpeach:function(){var t=this,e=new FormData,s="";"msg"==this.name?(s=this.$baseUrl+"/courseDiscussion/pub",e.set("courseId",this.param.get("courseId"))):(s=this.$baseUrl+"/ClassDiscussion/pub",e.set("classId",this.name)),e.set("token",this.param.get("token")),e.set("title",this.pubForm.title),e.set("content",this.pubForm.content),this.axios.post(s,e).then((function(e){console.log(e.data),200==e.data.code?(t.$message.success("发布成功！"),t.pubForm.title="",t.pubForm.content="",t.dialogVisible=!1,t.realGotData()):t.$message.error("发布失败！")})).catch((function(t){console.log(t)}))},goCommunity:function(t){this.$router.push({path:"/CommunityPart",query:{name:this.classList[t].name,id:this.classList[t].id}})},PartDetail:function(t){this.$router.push({path:"/Comment",query:{id:this.publishData[t].TieID,name:this.name}})},getToken:function(){var t=sessionStorage.getItem("token");return t.slice(1,t.length-1)},goBack:function(){this.$router.go(-1)},handleCurrentChange:function(t){console.log("当前页: ".concat(t)),this.param.set("currentPage",this.activePage),this.realGotData(),sessionStorage.setItem("nowPage",JSON.stringify(this.activePage))},showInfo:function(t){this.pubForm.content=t}}},ne=ie,oe=(s("9c7e"),Object(u["a"])(ne,Qt,Kt,!1,null,"69ef9cbe",null)),re=oe.exports,ce=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"communityPart"},[s("div",{staticClass:"workhead"},[s("i",{staticClass:"el-icon-back",on:{click:function(e){return t.goBack()}}}),s("p",{staticClass:"title"},[t._v(t._s(t.LTie.Ltitle))])]),s("hr"),s("ul",{staticClass:"TieList"},[s("li",{staticClass:"Lzhu"},[s("img",{attrs:{src:t.imgUrl+t.LTie.cover}}),s("div",{staticClass:"part"},[s("p",{staticClass:"headtab"},[t._v("\n\t\t\t\t\t"+t._s(t.LTie.name)+"\n\t\t\t\t\t"),1==t.LTie.Lrank?s("span",[t._v("老师")]):t._e(),s("span",[t._v(t._s(t.LTie.Ltime))])]),s("p",{domProps:{innerHTML:t._s(t.LTie.Lcontent)}}),s("p",{staticClass:"reply",on:{click:function(e){return t.replyBtn(-1)}}},[t._v("回复")])])]),t._l(t.TieData,(function(e,a){return s("li",{key:a},[s("img",{attrs:{src:t.imgUrl+e.cover}}),s("div",{staticClass:"part"},[s("p",{staticClass:"headtab"},[t._v(t._s(e.name)+"\n\t\t\t\t\t"),1==e.Arank?s("span",[t._v("老师")]):t._e(),s("span",[t._v(t._s(e.Atime))])]),s("p",[t._v(t._s(e.Acontent))]),s("p",{staticClass:"reply"},[s("span",{on:{click:function(s){return t.replyBtn(e.Aid)}}},[t._v("回复")])]),t._l(t.CommentData,(function(a,i){return s("div",{key:i,staticClass:"TtwiceCmt"},[e.Aid==a.elderID?s("ul",t._l(a.cmList,(function(e,a){return s("li",{key:a},[s("img",{attrs:{src:t.imgUrl+e.cover}}),s("div",{staticClass:"tpart"},[s("p",{staticClass:"headtab"},[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(e.name)+"\n\t\t\t\t\t\t\t\t\t"),1==e.Arank?s("span",{staticClass:"tab"},[t._v("老师")]):t._e(),s("span",[t._v(t._s(e.Atime))])]),s("p",[t._v(t._s(e.Acontent)+t._s(e.whenAnswer))]),s("p",{staticClass:"reply",on:{click:function(s){return t.replyBtn(e.Aid)}}},[t._v("回复")])])])})),0):t._e()])}))],2)])}))],2),t.isreply?s("div",{staticClass:"Input"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.Treply,expression:"Treply"}],attrs:{type:"text",name:"reply",placeholder:"输入你的回复",autocomplete:"off"},domProps:{value:t.Treply},on:{input:function(e){e.target.composing||(t.Treply=e.target.value)}}}),s("p",{staticClass:"sendBtn",on:{click:function(e){return t.Comment()}}},[t._v("回复")])]):t._e()])},le=[],ue={name:"communityPart",data:function(){return{imgUrl:"",param:new FormData,replyParam:new FormData,name:"",TieId:"",TieUrl:"",Treply:"",isreply:!1,content:"",LTie:{TieID:"",courseID:"",name:"",cover:"default.jpg",Ltitle:"",Lcontent:"",Lrank:"",Ltime:"",answering:!1},TieData:[],CommentData:[]}},mounted:function(){this.getToken()&&(this.getTitleInfo(),this.imgUrl=this.$ImgUrl+"/avatar/")},methods:{addStyle:function(t){var e="";return e=t.replace(/<p><img/g,'<p ><img style="width: 100%;margin: 1vw 0;"'),e=e.replace(/<p class/g,'<p style="text-indent: 2em;margin: 0;font-size: 1.3vw;line-height: 1.8vw;" class'),e=e.replace(/<p>/g,'<p style="text-indent: 2em;margin: 0;font-size: 1.3vw;line-height: 1.8vw;">'),e},getTitleInfo:function(){var t=this.$route.query;this.TieId=t.id,this.name=t.name,"msg"==t.name?this.TieUrl=this.$baseUrl+"/courseDiscussion/question/"+this.TieId:this.TieUrl=this.$baseUrl+"/ClassDiscussion/question/"+this.TieId,this.param.set("token",this.getToken()),this.viewTie()},viewTie:function(){var t=this;this.axios.post(this.TieUrl,this.param).then((function(e){var s=e.data,a={};t.TieData=[],t.CommentData=[];var i=function(t){return a={TieID:t.id,courseID:t.courseId,name:t.userDto.name,cover:t.userDto.avatar,Ltitle:t.title,Lcontent:t.content,Lrank:t.isTeacher,Ltime:t.time,answering:!1},a},n=function(t){return a={Aid:t.id,AsuperID:t.superiorId,Acontent:t.content,name:t.respondent.name,cover:t.respondent.avatar,Atime:t.time,Arank:t.isTeacher,whenAnswer:""},a};if(200==s.code)if(console.log(s.data),t.LTie=i(s.data),t.LTie.Lcontent=t.addStyle(t.LTie.Lcontent),console.log(t.LTie.Lcontent),Array.isArray(s.data.answerList)){var o=!0,r=!1,c=void 0;try{for(var l,u=s.data.answerList[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var h=l.value;if(-1==h.superiorId)t.TieData.push(n(h));else{var m={elderID:h.superiorId,cmList:[],cmIds:[]},d="",p=-1,g="";if(0!=t.CommentData.length){for(var f=0;f<t.CommentData.length;f++)for(var v=t.CommentData[f],b=0;b<v.cmIds.length;b++)h.superiorId==v.cmIds[b]&&(t.CommentData[f].cmIds.push(h.id),g=t.CommentData[f].elderID,d=" //@ "+v.cmList[b].name+" : "+v.cmList[b].Acontent);for(var w=0;w<t.CommentData.length;w++)""==g&&h.superiorId,g==t.CommentData[w].elderID&&(p=w)}if(-1==p)m.cmList.push(n(h)),m.cmIds.push(h.id),t.CommentData.push(m);else if(""!=d){var C=n(h);C.whenAnswer=d,t.CommentData[p].cmList.push(C)}else t.CommentData[p].cmList.push(n(h))}}}catch(k){r=!0,c=k}finally{try{o||null==u.return||u.return()}finally{if(r)throw c}}}else t.$message.warning(t.name+"列表为空！");else t.$message.error("获取"+t.name+"列表失败！")})).catch((function(t){console.log(t)}))},goBack:function(){this.$router.go(-1)},replyBtn:function(t){this.isreply=!0,this.param.set("superiorId",t),this.param.set("qsId",this.TieId)},showInfo:function(t){this.content=t},ifshowAnswer:function(t){this.TieData[t].answering=!this.TieData[t].answering,console.log(this.TieData[t].answering,t)},Comment:function(){var t=this,e="";e="msg"==this.name?this.$baseUrl+"/courseDiscussion/reply":this.$baseUrl+"/ClassDiscussion/reply",this.param.set("content",this.Treply),this.axios.post(e,this.param).then((function(e){console.log(e.data),200==e.data.code&&(t.Treply="",t.isreply=!1,t.param.delete("superiorId"),t.param.delete("qsrId"),t.param.delete("content"))})).catch((function(t){console.log(t)})),this.viewTie()},getToken:function(){var t=sessionStorage.getItem("token");if(null!=t)return t.slice(1,t.length-1)}}},he=ue,me=(s("c61a"),Object(u["a"])(he,ce,le,!1,null,"3381d1c9",null)),de=me.exports,pe=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"homework"},[s("div",{staticClass:"workhead"},[s("i",{staticClass:"el-icon-back",on:{click:function(e){return t.goBack()}}}),s("p",[t._v("作业情况")])]),s("hr"),s("div",{staticClass:"StuList"},t._l(t.StuList,(function(e,a){return s("el-row",{key:a},[s("el-col",{attrs:{span:16}},[s("div",{staticClass:"main"},[s("p",[t._v(t._s(e.username))]),s("p",[t._v(t._s(e.name))])])]),s("el-col",{attrs:{span:6}},[s("div",{staticClass:"operate"},[s("p",[t._v(t._s(e.score))]),s("i",{class:e.status?"el-icon-success":"el-icon-remove",style:e.status?{color:"#98E26E"}:"",attrs:{title:e.status?"已提交":"未提交"}}),s("p",{staticStyle:{"padding-left":"-.7vw"}},[t._v(t._s(e.status?"已提交":"未提交"))]),s("a",{staticStyle:{color:"black"},attrs:{href:t.imgUrl+e.url,download:e.name}},[s("i",{staticClass:"el-icon-download"})])])]),s("el-col",{attrs:{span:2}},[s("el-popover",{attrs:{placement:"top",width:"160"},model:{value:t.cmvisible,callback:function(e){t.cmvisible=e},expression:"cmvisible"}},[s("div",{staticClass:"block"},[s("span",{staticClass:"demonstration"},[t._v("评分")]),s("el-slider",{model:{value:t.stu.score,callback:function(e){t.$set(t.stu,"score",e)},expression:"stu.score"}})],1),s("div",{staticStyle:{"text-align":"right",margin:"0"}},[s("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){return t.giveCancel()}}},[t._v("取消")]),s("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(s){return t.giveConfirm(e.id)}}},[t._v("确定")])],1),s("div",{staticClass:"graded",attrs:{slot:"reference"},slot:"reference"},[t._v("打分")])])],1)],1)})),1),s("div",{staticClass:"paging"},[t.ispage?s("el-pagination",{attrs:{"current-page":t.activePage,"page-size":5,"pager-count":5,layout:"prev, pager, next",total:t.totalPage},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.activePage=e},"update:current-page":function(e){t.activePage=e}}}):t._e()],1)])},ge=[],fe={name:"homework",data:function(){return{param:new FormData,activePage:1,ispage:!1,totalPage:1,category:"",workId:"",url:"",imgUrl:"",StuList:[],cmvisible:!1,num:1,stu:{id:"",score:80}}},mounted:function(){this.getToken()&&(this.imgUrl=this.$ImgUrl+"/submitted/",this.getListParam())},methods:{getListParam:function(){sessionStorage.getItem("courseID");var t=this.$route.query;this.url=this.$baseUrl+"/homework/showSubmit/"+t.id,"test"==t.name?this.category="作业":this.category="考试";var e=sessionStorage.getItem("nowPage");console.log(e),this.activePage=e?parseInt(e):this.activePage,this.param.set("token",this.getToken()),this.param.set("pageNum",8),this.param.set("currentPage",this.activePage),this.getListData()},getListData:function(){var t=this;this.axios.post(this.url,this.param).then((function(e){console.log(e.data),e=e.data;var s={};t.StuList=[];var a=function(t){return s={id:t.id,name:t.name,score:t.score?t.score:"待审阅",status:0,url:t.url,username:t.username},s};if(200==e.code)if(t.totalPage=e.data.totalNumber,Array.isArray(e.data.pageData)){var i=!0,n=!1,o=void 0;try{for(var r,c=e.data.pageData[Symbol.iterator]();!(i=(r=c.next()).done);i=!0){var l=r.value;t.StuList.push(a(l))}}catch(u){n=!0,o=u}finally{try{i||null==c.return||c.return()}finally{if(n)throw o}}t.ispage=!0}else t.$message.warning("暂无数据！");else t.$message.error("获取"+t.name+"列表失败！")}))},goBack:function(){this.$router.go(-1)},handleCurrentChange:function(t){console.log("当前页: ".concat(t)),this.param.set("currentPage",this.activePage),this.getListData(),sessionStorage.setItem("nowPage",JSON.stringify(this.activePage))},getToken:function(){var t=sessionStorage.getItem("token");return t.slice(1,t.length-1)},giveCancel:function(){this.stu.score=80,this.cmvisible=!1},giveConfirm:function(t){console.log(t,this.stu.score);var e=this,s=this.$baseUrl+"/homework/judge",a=new FormData;a.set("token",this.getToken()),a.set("id",t),a.set("score",this.stu.score),this.axios.post(s,a).then((function(t){console.log(t.data),200==t.data.code&&(e.stu.score=80,e.cmvisible=!1,e.getListData())}))}}},ve=fe,be=(s("e68d"),Object(u["a"])(ve,pe,ge,!1,null,null,null)),we=be.exports,Ce=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"selfInfo"},[s("div",{staticClass:"pubHead"},[s("p",[t._v("个人信息")]),s("ul",[t.isEdit?t._e():s("li",{on:{click:function(e){return t.upInfo()}}},[t._v("编辑")]),t.isEdit?s("li",{on:{click:function(e){return t.cancle()}}},[t._v("取消")]):t._e(),t.isEdit?s("li",{on:{click:function(e){return t.submit()}}},[t._v("确定")]):t._e()])]),t.isEdit?t._e():s("div",{staticClass:"showInfo"},[s("img",{attrs:{src:t.imgUrl+t.teacher.cover,alt:"图片错误"}}),s("ul",[s("li",[t._v(t._s(t.teacher.name))]),s("li",[s("p",[t._v("账号："+t._s(t.teacher.username))]),s("p",[t._v("邮箱："+t._s(t.teacher.email))])])])]),t.isEdit?s("div",{staticClass:"upInfo"},[s("el-row",[""!=t.upImg?s("el-col",{attrs:{span:8}},[s("img",{attrs:{src:t.upImg}})]):t._e(),s("el-col",{directives:[{name:"show",rawName:"v-show",value:""==t.upImg,expression:"upImg != ''? false:true"}],attrs:{span:8}},[s("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.$baseUrl+"/uAvatar","list-type":"picture-card","auto-upload":"",accept:"*.png,*.jpg,*.jpeg","show-file-list":!1,"on-success":t.handleSuc,"on-error":t.handleErr,data:t.ImgCover}},[s("i",{staticClass:"el-icon-plus",attrs:{slot:"default"},slot:"default"})])],1),s("el-col",{attrs:{span:16}},[s("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm,rules:t.rules,"label-width":"100px","label-position":"left"}},[s("el-form-item",{attrs:{label:"修改昵称",prop:"name"}},[s("el-input",{attrs:{placeholder:"请输入新昵称"},model:{value:t.ruleForm.name,callback:function(e){t.$set(t.ruleForm,"name",e)},expression:"ruleForm.name"}})],1),s("el-form-item",{attrs:{label:"修改密码",prop:"psd"}},[s("el-input",{attrs:{placeholder:"请输入新密码"},model:{value:t.ruleForm.psd,callback:function(e){t.$set(t.ruleForm,"psd",e)},expression:"ruleForm.psd"}})],1),s("el-form-item",{attrs:{label:"修改邮箱",prop:"email"}},[s("el-input",{attrs:{placeholder:"请输入新邮箱"},model:{value:t.ruleForm.email,callback:function(e){t.$set(t.ruleForm,"email",e)},expression:"ruleForm.email"}})],1)],1)],1)],1)],1):t._e()])},ke=[],_e={name:"selfInfo",data:function(){var t=function(t,e,s){""===e?s(new Error("昵称不能为空")):s()},e=function(t,e,s){""===e?s(new Error("新密码不能为空")):s()},s=function(t,e,s){if(""===e)s(new Error("邮箱不能为空"));else{var a=/^([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/;1==a.test(e)?s():s(new Error("请输入正确格式邮箱！"))}};return{imgUrl:"",param:new FormData,upImg:"",isEdit:!1,isUpImg:!1,ImgCover:{token:""},ruleForm:{name:"",email:"",cover:"",id:"",psd:""},teacher:{name:"",email:"",cover:"15/176/1570584130210.jpg",id:"",username:""},rules:{name:[{validator:t,trigger:"blur"}],psd:[{validator:e,trigger:"blur"}],email:[{validator:s,trigger:"blur"}]}}},mounted:function(){this.getToken()&&(this.getInfoParam(),this.imgUrl=this.$ImgUrl+"/avatar/")},methods:{getInfoParam:function(){this.param.set("token",this.getToken()),this.getInfo()},getInfo:function(){var t=this,e=this.$baseUrl+"/info";this.axios.post(e,this.param).then((function(e){e=e.data,console.log(e),200==e.code&&(t.teacher.id=e.data.id,t.teacher.username=e.data.username,t.teacher.name=e.data.name,t.teacher.email=e.data.email,t.teacher.cover=e.data.avatar,t.$store.commit("upUserInfo",{name:e.data.name,cover:e.data.avatar}))})).catch((function(t){console.log(t)}))},cancle:function(){this.isEdit=!1},upInfo:function(){this.isEdit=!0,this.upImg="",this.ruleForm.name=this.teacher.name,this.ruleForm.email=this.teacher.email,this.ImgCover.token=this.getToken()},submit:function(){var t=1==this.isUpImg,e=this.ruleForm.name==this.teacher.name&&this.ruleForm.email==this.teacher.email&&""==this.ruleForm.psd;if(console.log(t,e),t)e?(this.$message.success("修改图片成功！"),this.isEdit=!1,this.Upimg="",this.getInfo()):this.UpDataInfo(),this.isUpImg=!1;else{if(e)return void this.$message.warning("请确定有修改内容！");this.UpDataInfo()}},UpDataInfo:function(){var t=this,e=new FormData;this.ruleForm.psd.length<6&&this.$message.error("密码不能少于6位！"),this.ruleForm.name!=this.teacher.name&&e.set("name",this.ruleForm.name),this.ruleForm.email!=this.teacher.email&&e.set("email",this.ruleForm.email),this.ruleForm.psd!=this.teacher.psd&&e.set("password",this.ruleForm.psd),e.set("token",this.getToken());var s=this.$baseUrl+"/uInfo/teacher";this.axios.post(s,e).then((function(e){e=e.data,console.log(e),200==e.code&&(t.$message.success("更改成功！"),t.isEdit=!1,t.ruleForm.name="",t.ruleForm.psd="",t.ruleForm.email="",t.getInfo())})).catch((function(t){console.log(t)}))},handleSuc:function(t,e,s){console.log(t),this.upImg=e.url,this.isUpImg=!0},handleErr:function(t,e,s){console.log(t),0==s.length&&console.log("上传失败！"),console.log(s)},getToken:function(){var t=sessionStorage.getItem("token");return t.slice(1,t.length-1)}}},ye=_e,Ie=(s("0f7c"),Object(u["a"])(ye,Ce,ke,!1,null,"0a6c4fa2",null)),$e=Ie.exports;a["default"].use(y["a"]);var Pe=new y["a"]({mode:"hash",base:"",routes:[{path:"/",name:"Login",component:F},{path:"/News/:name",name:"news",component:function(){return s.e("about").then(s.bind(null,"a2f9"))}},{path:"/Publish",name:"Publish",component:q},{path:"/Show",name:"NewsShow",component:Z},{path:"/course",name:"Course",component:et},{path:"/StuManage",name:"StuManage",component:rt},{path:"/StuProgress",name:"StuProgress",component:$t},{path:"/CourseAdd",name:"CourseAdd",component:Ft},{path:"/CourseUpload",name:"CourseUpload",component:Ot},{path:"/CourseWare",name:"CourseWare",component:qt},{path:"/Exam/:name",name:"Exam",component:Zt},{path:"/Communicate/:name",name:"Communicate",component:re},{path:"/ClassChat",name:"ClassChat",component:dt},{path:"/Mymsg",name:"Mymsg",component:wt},{path:"/Comment",name:"Comment",component:de},{path:"/Homework",name:"Homework",component:we},{path:"/SelfInfo",name:"SelfInfo",component:$e}]}),xe=s("5c96"),Te=s.n(xe),De=s("953d"),Se=s.n(De),Fe=(s("0fae"),s("a753"),s("14e1"),s("8096"),{}),Ue=x.a.create(Fe);Ue.interceptors.request.use((function(t){return t}),(function(t){return Promise.reject(t)})),Ue.interceptors.response.use((function(t){return t}),(function(t){return Promise.reject(t)})),Plugin.install=function(t,e){t.axios=Ue,window.axios=Ue,Object.defineProperties(t.prototype,{axios:{get:function(){return Ue}},$axios:{get:function(){return Ue}}})},a["default"].use(Plugin);Plugin,s("99bf"),s("499a");var Le=s("2f62");a["default"].use(Le["a"]);var Ne=sessionStorage.getItem("state")?JSON.parse(sessionStorage.getItem("state")):{cover:"default.jpg",name:"未设置"},Ee=new Le["a"].Store({state:Ne,mutations:{upUserInfo:function(t,e){t.cover=e.cover,t.name=e.name}},actions:{}}),Ae=Ee;a["default"].use(Se.a),a["default"].use(Te.a),a["default"].prototype.$baseUrl="/Video_Forensics",a["default"].prototype.$ImgUrl="/resources",a["default"].config.productionTip=!1,new a["default"]({router:Pe,store:Ae,render:function(t){return t(_)}}).$mount("#app");var Oe=y["a"].prototype.push;y["a"].prototype.push=function(t){return Oe.call(this,t).catch((function(t){return t}))}},"65ab":function(t,e,s){"use strict";var a=s("0abc"),i=s.n(a);i.a},7266:function(t,e,s){},"74cd":function(t,e,s){},"7fb7":function(t,e,s){},"86b8":function(t,e,s){},"89a2":function(t,e,s){"use strict";var a=s("74cd"),i=s.n(a);i.a},"8e75":function(t,e,s){},"92d7":function(t,e,s){},9445:function(t,e,s){"use strict";var a=s("f1e3"),i=s.n(a);i.a},9594:function(t,e,s){"use strict";var a=s("7fb7"),i=s.n(a);i.a},"977b":function(t,e,s){t.exports=s.p+"img/text.3a3af514.gif"},"99bf":function(t,e,s){},"9c7e":function(t,e,s){"use strict";var a=s("5306"),i=s.n(a);i.a},"9fb1":function(t,e,s){"use strict";var a=s("bcae"),i=s.n(a);i.a},a2e6:function(t,e,s){"use strict";var a=s("3846"),i=s.n(a);i.a},a673:function(t,e,s){},b488:function(t,e,s){"use strict";var a=s("3013"),i=s.n(a);i.a},b4d0:function(t,e,s){t.exports=s.p+"img/log.9207c06b.gif"},b548:function(t,e,s){"use strict";var a=s("edb5"),i=s.n(a);i.a},bcae:function(t,e,s){},c272:function(t,e,s){},c61a:function(t,e,s){"use strict";var a=s("4725"),i=s.n(a);i.a},cf88:function(t,e,s){"use strict";var a=s("2ae3"),i=s.n(a);i.a},e68d:function(t,e,s){"use strict";var a=s("ec47"),i=s.n(a);i.a},ec47:function(t,e,s){},edb5:function(t,e,s){},f1e3:function(t,e,s){},fabf:function(t,e,s){"use strict";var a=s("8e75"),i=s.n(a);i.a},fe1b:function(t,e,s){}});
//# sourceMappingURL=app.bd5bfa34.js.map